(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-027b0496"],{"243b":function(t,e,r){"use strict";var a=r("526b"),n=r.n(a);n.a},4632:function(t,e,r){"use strict";var a=r("7949"),n=r.n(a);n.a},"526b":function(t,e,r){},7949:function(t,e,r){},"870a":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"control-container"},[r("select",{attrs:{id:"quarters"}},[r("option",[t._v("Select cohort quarter")]),t._l(t.quarters,(function(e,a){return r("option",{key:a,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])}))],2),r("button",{ref:"myid",staticClass:"btn btn-primary",attrs:{id:"submit-btn"},on:{click:function(e){return t.selectQuarter(!1)}}},[t._v("Archived report (if available)")]),r("button",{ref:"myid",staticClass:"btn btn-danger",attrs:{id:"generate-btn"},on:{click:function(e){return t.selectQuarter(!0)}}},[t._v("Fresh report")])])},n=[],s={data:function(){return{quarters:[]}},props:["onSubmit"],methods:{selectQuarter:function(t){var e=quarters.value?[quarters.value,t]:[];this.onSubmit(e)},enableBTN:function(){this.$refs.myid.disabled=!1},loadQuarters:function(){var t=[],e="",r=new Date;r=new Date(r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" 00:00");var a=r.getFullYear();r>=new Date(a+"-01-01 00:00")&&r<=new Date(a+"-03-31 00:00")?e="1 "+a:r>=new Date(a+"-04-01 00:00")&&r<=new Date(a+"-06-30 00:00")?e="2 "+a:r>=new Date(a+"-07-01 00:00")&&r<=new Date(a+"-09-30 00:00")?e="3 "+a:r>=new Date(a+"-10-01 00:00")&&r<=new Date(a+"-12-31 00:00")&&(e="4 "+a);var n=parseInt(e.substring(0,1)),s=0;while(s<5)0==s&&this.addFollowingQ(t,n,a),t.push("Q"+n+" "+a),n=n>0?n-=1:n,a=0==n?a-1:a,n=0==n?n+=4:n,s++;this.quarters=t},addFollowingQ:function(t,e,r){e<4?t.push("Q"+(e+1)+" "+r):t.push("Q1 "+(r+1))}},mounted:function(){this.loadQuarters()}},i=s,o=(r("99d2"),r("2877")),u=Object(o["a"])(i,a,n,!1,null,"f39eba7c",null);e["a"]=u.exports},9331:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[r("side-bar"),r("div",{attrs:{id:"page-content-wrapper"}},[r("top-nav"),r("div",{staticClass:"cohort"},[r("report-date-picker",{attrs:{onSubmit:t.fetchData}})],1),r("div",{staticStyle:{width:"100%","text-align":"right","margin-top":"25px"}},[r("select",{ref:"subgroup"},[r("option",[t._v("Select sub group")]),r("option",{attrs:{value:"General"}},[t._v("General")]),r("option",{attrs:{value:"Children"}},[t._v("Children")]),r("option",{attrs:{value:"Option B+"}},[t._v("Option B+")])])]),t._m(0)],1)],1)])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"display",attrs:{id:"example",width:"100%"}},[r("thead",[r("tr",[r("th",[t._v("Reg cohort")]),r("th",[t._v("Interval (months)")]),r("th",[t._v("Sub group")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Total Reg (database)")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Total Reg (confirmed)")]),r("th",{staticClass:"disaggregated-numbers count-separator"},[t._v("Alive")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Died")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Defaulted")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Stopped")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("TO")]),r("th",{staticClass:"disaggregated-numbers"},[t._v("Unknown")])])]),r("tbody",{attrs:{id:"table-body"}})])}],s=(r("ac1f"),r("1276"),r("96cf"),r("1da1")),i=r("ebd8"),o=r("7c08"),u=r("870a"),l=r("c1df"),c=r.n(l),d=r("8051"),p=r("1157"),h=r.n(p);r("6810");r("2cdf"),r("fd5e"),r("5caa"),r("c3dc"),r("4e95"),r("a8a1"),r("919c"),r("4b69"),r("7dae"),r("a821");var v={name:"reports",components:{"top-nav":i["a"],"side-bar":o["a"],"report-date-picker":u["a"]},methods:{redirect:function(){this.$router.push("/moh")},fetchData:function(t){t&&(this.reportQtr=t[0],this.regenerateReport=t[1],"Select cohort quarter"!=this.reportQtr&&"Select sub group"!=this.$refs.subgroup.value&&this.fetchSurvivalAnalysisData())},fetchSurvivalAnalysisData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,r,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="cohort_survival_analysis?date="+c()().format("YYYY-MM-DD"),e+="&quarter="+this.reportQtr,e+="&age_group="+this.$refs.subgroup.value+"&program_id=1",1==this.regenerateReport?(this.regenerateReport=!1,e+="&regenerate=true"):e+="&regenerate=false",console.log(e),t.next=7,d["a"].get(e,{},{});case 7:r=t.sent,200===r.status&&r.json().then((function(t){return a.loadData(t,a.$refs.subgroup.value)}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadData:function(t,e){for(var r in this.dTable.fnClearTable(),t){r.split(" ")[1];var a=t[r],n=r,s="",i=0,o=0,u=0,l=0,c=0,d=0,p=0;for(var h in a){var v=a[h];for(var f in v)s=f,"On antiretrovirals"==h?i=a[h][f]:"Defaulted"==h?u=a[h][f]:"Patient died"==h?o=a[h][f]:"Stopped"==h?l=a[h][f]:"Patient transferred out"==h?c=a[h][f]:d=a[h][f],p+=a[h][f]}if(p>0)this.dTable.fnAddData([n,s,e,p,"",i,o,u,l,c,d])}},addClass:function(t){var e=document.getElementById(t),r=e.getElementsByTagName("td");r[5].setAttribute("class","count-separator")},initDataTable:function(){this.dTable=h()("#example").dataTable({order:[[0,"asc"]],fixedHeader:!0,searching:!1,paging:!1,Processing:!0,ServerSide:!0,scroller:{loadingIndicator:!0},dom:"Bfrtip",buttons:[{extend:"copy",title:this.report_title},{extend:"csv",title:this.report_title},{extend:"pdf",title:this.report_title},{extend:"print",title:this.report_title}],columnDefs:[{className:"dt-center",targets:4}]})}},data:function(){return{report_title:"MoH cohort report (Survival analysis)",reportQtr:[],regenerateReport:!1,reportData:null,reportID:null}},mounted:function(){var t=this;this.report_title=sessionStorage.location_name+" "+this.report_title,setTimeout((function(){return t.initDataTable()}),300)}},f=v,g=(r("243b"),r("4632"),r("2877")),b=Object(g["a"])(f,a,n,!1,null,"e6a1fd76",null);e["default"]=b.exports},"99d2":function(t,e,r){"use strict";var a=r("9c63"),n=r.n(a);n.a},"9c63":function(t,e,r){}}]);
//# sourceMappingURL=chunk-027b0496.06d1ca66.js.map