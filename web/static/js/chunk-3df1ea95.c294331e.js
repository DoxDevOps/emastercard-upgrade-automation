(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3df1ea95"],{"00a3":function(e,t,a){},"29bc":function(e,t,a){"use strict";var n=a("be43"),i=a.n(n);i.a},"498a":function(e,t,a){"use strict";var n=a("23e7"),i=a("58a8").trim,s=a("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),i=a("5899"),s="["+i+"]",r=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5bf7":function(e,t,a){},"662c":function(e,t,a){"use strict";var n=a("e496"),i=a.n(n);i.a},7833:function(e,t,a){"use strict";a("96cf");var n=a("1da1"),i=a("8051");t["a"]=function(){function e(){return t.apply(this,arguments)}function t(){return t=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get("global_properties?property=site_prefix");case 2:return t=e.sent,404===t.status&&alert("Site prefix not set, set it in settings/ sit_prefix"),e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a.site_prefix);case 8:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}return{getSitePrefix:e}}()},"7c67":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("patient-information")],1),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("encounter-modal")}}},[e._v("Add Visit")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("outcome-modal")}}},[e._v("Update Outcome")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.show("viral-load-modal")}}},[e._v("Viral Load")]),a("div",{staticClass:"row",staticStyle:{margin:"10px","margin-top":"5px"}},[a("visit-data")],1),a("b-modal",{attrs:{id:"encounter-modal",title:"encounter",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:""}},[e._v("Encounter Date")])]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])]),a("encounter",{attrs:{date:e.date}})],1),a("b-modal",{attrs:{id:"outcome-modal",title:"outcome",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("outcome")],1),a("b-modal",{attrs:{id:"viral-load-modal",title:"encounter",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("viral-load",{ref:"viral-load"})],1)],1)],1)],1)])},i=[],s=a("ebd8"),r=a("7c08"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"container-fluid"},[a("table",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col-md-6 information",attrs:{"data-toggle":"modal"},on:{click:function(t){return e.$bvModal.show("arv-number-modal")}}},[a("p",[e._v(e._s(e.arvNumber))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(1),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.name))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.age)+" ("+e._s(e.initialAge)+")")])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(3),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.sex))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(4),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.initialWeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(5),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.initialHeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(6),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.bmi))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(7),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.ti))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(8),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.location))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(9),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.landmark))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(10),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.occupation))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(11),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.nameOfGuardian))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(12),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.dateOfHIVTest)+" "+e._s(e.placeOfHIVTest))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(13),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.followUp))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(14),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.startDate))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(15),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.startReason))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(16),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.EPTB))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(17),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.PTB))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(18),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.kaposisSarcoma))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[e._m(19),a("div",{staticClass:"col-md-6 information"},[a("p",[e._v(e._s(e.tbLastTwoYears))])])])])])]),a("b-modal",{attrs:{id:"arv-number-modal",title:"encounter",size:"xl"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[e._v("ARV-Number")])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.arv_num,expression:"arv_num"}],staticClass:"form-control",attrs:{type:"number","aria-label":"Default","aria-describedby":"inputGroup-sizing-default"},domProps:{value:e.arv_num},on:{input:function(t){t.target.composing||(e.arv_num=t.target.value)}}})])]),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:e.saveARVNumber}},[e._v("Submit")])])])])],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("ARV #")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("DOB and Age at initiation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Sex")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Initial Weight")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Initial Height")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("BMI")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("TI")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Location")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Landmark")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Occupation")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Name of Guardian")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Date and Place of HIV Test")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Agrees to follow up")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Date of starting first line ARV Regimen")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Reason for Starting ART")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Extra Pulmonary Tuberculosis")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Pulmonary Tuberculosis")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Kaposi's Sarcoma")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-md-6"},[a("p",[e._v("Tuberculosis withing the last 2 year")])])}],u=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("159b"),a("ade3")),l=(a("96cf"),a("1da1")),d=a("8051"),p=a("24ca"),m=a("7833"),v=a("c1df"),f=a.n(v),h=Object(u["a"])({data:function(){return{arvNumber:null,arv_num:null,name:null,age:null,sex:null,dob:null,initialWeight:null,initialHeight:null,bmi:null,ti:null,location:null,landmark:null,occupation:null,nameOfGuardian:null,dateOfHIVTest:null,placeOfHIVTest:null,followUp:null,startDate:null,startReason:null,EPTB:null,PTB:null,kaposisSarcoma:null,tbLastTwoYears:null,patientID:null,sitePrefix:null,showARVNumber:!1,obs:[{conceptID:5089,variableName:"initialWeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"initialHeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:2137,variableName:"bmi",valueType:"value_numeric",secondType:"value_text"},{conceptID:7881,variableName:"placeOfHIVTest",valueType:"value_text"},{conceptID:7882,variableName:"dateOfHIVTest",valueType:"value_datetime",secondType:"value_text"},{conceptID:7754,variableName:"ti",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:7751,variableName:"ti",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}},{conceptID:2552,variableName:"followUp",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:9685,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No",backupConcept:{conceptID:9686,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}}},{conceptID:2516,variableName:"startDate",valueType:"value_datetime",secondType:"value_text"},{conceptID:7563,variableName:"startReason",valueType:"value_coded",secondType:"value_text"},{conceptID:2743,subConcepts:{507:{variableName:"kaposisSarcoma",returnValue:"Yes"},1547:{variableName:"EPTB",returnValue:"Yes"},7539:{variableName:"tbLastTwoYears",returnValue:"Yes"},8206:{variableName:"PTB",returnValue:"Yes"}}}]}},computed:{},methods:{getPatient:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/patients/".concat(this.patientID));case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getGuardian:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/people/".concat(this.patientID,"/relationships")).then((function(e){e.json().then((function(e){if(e.length>0){var a=e[0]["relation"]["names"][0],n=e[0]["type"]["b_is_to_a"];t.nameOfGuardian=a["given_name"]+" "+a["family_name"]+" ("+n+")"}}))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getObs:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/observations?person_id=".concat(this.patientID,"&&concept_id=").concat(t.conceptID),a=t.params?a+"&&"+t.params:a,e.next=4,d["a"].get(a);case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getConcept:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/concepts/".concat(a)).then((function(e){e.json().then((function(e){n[t.variableName]=e.concept_names[0].name}))}));case 2:case"end":return e.stop()}}),e)})));function t(t,a,n){return e.apply(this,arguments)}return t}(),createOb:function(e,t){var a=this;this.getObs(e).then((function(n){if(n.length>0)if(e.returnValue)t[e.variableName]=e.returnValue;else if(e.subConcepts)n.forEach((function(a){try{t[e.subConcepts[a.value_coded].variableName]=e.subConcepts[a.value_coded].returnValue}catch(n){}}));else{var i=n[n.length-1][e.valueType]?n[n.length-1][e.valueType]:n[n.length-1][e.secondType];if(t[e.variableName]="value_datetime"===e.valueType?f()(i).format("DD-MMM-YYYY"):i,"value_coded"===e.valueType&&a.getConcept(e,i,t),5089===e.conceptID){var s=n[0][e.valueType]?n[0][e.valueType]:n[0][e.secondType];p["a"].$emit("set-initial-weight",s)}if(5090===e.conceptID){var r=n[0][e.valueType]?n[0][e.valueType]:n[0][e.secondType];p["a"].$emit("set-previous-height",r),a.$store.commit("setHeight",r)}}else e.backupConcept&&a.createOb(e.backupConcept,t),e.default?t[e.variableName]=e.default:t[e.variableName]="N/A"}))},obsService:function(e){switch(key){case value:break;default:break}},getAtribute:function(e,t){var a=e.person.person_attributes.filter((function(e){return e.person_attribute_type_id==t}));return a.length>0?a[0].value:""},getPrefix:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getSitePrefix();case 2:this.sitePrefix=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveARVNumber:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="".concat(this.sitePrefix,"-ARV-").concat(this.arv_num),a={identifier:t,identifier_type:4,patient_id:this.$route.params.id},e.next=4,d["a"].post("/patient_identifiers/",a);case 4:n=e.sent,201===n.status||200===n.status?(this.$toasted.show("Successfully saved",{theme:"toasted-primary",position:"top-right",duration:5e3}),this.arvNumber=t,this.$root.$emit("bv::hide::modal","arv-number-modal","#btnShow"),console.log("Succesfully done")):console.log("Failed to update");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.getPrefix(),this.patientID=this.$route.params.id,this.getPatient().then((function(t){e.name=" ".concat(t["person"].names[0].given_name," ").concat(t.person.names[0].family_name," "),e.dob=t.person.birthdate,e.age=" ".concat(f()(t.person.birthdate).format("DD-MMM-YYYY"));var a=t.patient_identifiers.filter((function(e){return"ARV Number"===e.type.name}));e.arvNumber=a.length>0?a[0].identifier:"N/A",e.sex=t.person.gender,e.location=t.person.addresses[0].city_village,e.landmark=e.getAtribute(t,19),e.occupation=e.getAtribute(t,13);var n={name:e.name,dob:t.person.birthdate,age:f()().diff(t.person.birthdate,"years",!1),arvNumber:e.arvNumber,sex:e.sex};e.$store.commit("setPatient",n)})),this.obs.forEach((function(t){e.createOb(t,e)})),this.getGuardian()}},"computed",{initialAge:function(){var e="N/A";return"N/A"!==this.startDate&&(e=f()(this.startDate).diff(this.dob,"years",!1)),e}}),_=h,g=(a("9b3a"),a("2877")),b=Object(g["a"])(_,o,c,!1,null,"1e1509ba",null),C=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"table table-dark"},[e._m(0),a("tbody",e._l(e.patientVisits,(function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(e.moment(t.visitDate).format("DD-MMM-YYYY")))]),a("td",[e._v(e._s(t.givenTo))]),a("td",[e._v(e._s(t.weight))]),a("td",[e._v(e._s(t.height))]),a("td",[e._v(e._s(t.sideEffects))]),a("td",[e._v(e._s(t.ARTRegimen))]),a("td",[e._v(e._s(t.nextAppointment))]),a("td",[e._v(e._s(t.outcome))]),a("td",[e._v(e._s(t.viralLoad))]),a("td",[t.encounters.length>0?a("button",{staticClass:"btn btn-danger",on:{click:function(a){return e.deleteVisit(n,t.encounters)}}},["deleting"===t.state?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Loading...")])]:[a("span",[e._v("X")])]],2):e._e()])])})),0)])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Visit Date")]),a("th",[e._v("Given To")]),a("th",[e._v("Weight")]),a("th",[e._v("Height")]),a("th",[e._v("Side Effects")]),a("th",[e._v("ART Regimen")]),a("th",[e._v("Next Appointment")]),a("th",[e._v("Outcome")]),a("th",[e._v("Viral Load")])])])}];a("a4d3"),a("a434"),a("e439"),a("dbb4"),a("b64b");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(u["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={data:function(){return{patientVisits:[],mockOBJ:{visitDate:null,givenTo:null,weight:null,height:null,sideEffects:null,ARTRegimen:null,nextAppointment:null,viralLoad:null,outcoume:null,encounters:[],state:null},encountersToDelete:[],obs:[{conceptID:5089,variableName:"weight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"height",valueType:"value_numeric",secondType:"value_text"},{conceptID:5096,variableName:"nextAppointment",valueType:"value_datetime",secondType:"value_text"},{conceptID:856,variableName:"viralLoad",valueType:"value_numeric",secondType:"value_text",prepend:"value_text"}]}},methods:{getVisits:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/patients/".concat(this.$route.params.id,"/visits")).then((function(e){e.json().then((function(e){t.setVisits(e)}))}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteVisit:function(e,t){var a=this,n=t.length;this.patientVisits[e].state="deleting",t.forEach((function(t){a.removeEncounter(t).then((function(t){204==t.status?(n-=1,0===n&&a.patientVisits.splice(e,1)):console.log("not deleted")}))}))},removeEncounter:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].remove("encounters/"+t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setVisits:function(e){var t=this,a=[];e.forEach((function(e){a.push({visitDate:e,encounters:t})})),this.createOb(a)},getObs:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/observations?person_id=".concat(this.$route.params.id,"&&concept_id=").concat(t.conceptID,"&&obs_datetime=").concat(a.visitDate),n=t.params?n+"&&"+t.params:n,e.next=4,d["a"].get(n);case 4:return i=e.sent,e.next=7,i.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),getEncounters:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="/encounters?patient_id=".concat(this.$route.params.id,"&&date=").concat(t),e.next=3,d["a"].get(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCurrentPatientInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="programs/1/patients/".concat(this.$route.params.id,"?date=").concat(t.visitDate),e.next=3,d["a"].get(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getNextAppointMent:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="programs/1/patients/".concat(this.$route.params.id,"/next_appointment_date"),e.next=3,d["a"].get(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createOb:function(e){var t=this;e.forEach((function(e){var a=E({},t.mockOBJ);a.visitDate=e.visitDate,t.obs.forEach((function(n){t.getObs(n,e).then((function(i){if(i.length>0)if(n.returnValue)e.variableName=n.returnValue;else if(n.subConcepts)i.forEach((function(t){try{e.subConcepts[t.value_coded].variableName=e.subConcepts[t.value_coded].returnValue}catch(a){}}));else{var s=i[i.length-1][n.valueType]?i[i.length-1][n.valueType]:i[i.length-1][n.secondType];a[n.variableName]="value_datetime"===n.valueType?f()(s).format("DD-MMM-YYYY"):s,"value_coded"===n.valueType&&t.getConcept(e,s,context),n.prepend&&(a[n.variableName]=i[i.length-1][n.prepend]+" "+s)}else n.backupConcept,n.default?e.variableName=n.default:e[n.variableName]="N/A"}))})),t.getCurrentPatientInfo(e).then((function(t){e.ARTRegimen=t.current_regimen,e.outcome=t.current_outcome,a.ARTRegimen=t.current_regimen,a.outcome=t.current_outcome})),t.getObs({conceptID:7755},e).then((function(t){var n=t.filter((function(e,a){return 1065==t[a].children[0].value_coded})).length;e.sideEffects=n,a.sideEffects=n})),t.getObs({conceptID:1805,params:"value_coded=1065"},e).then((function(t){t.length>0?(e.givenTo="Patient",a.givenTo="Patient"):(e.givenTo="Guardian",a.givenTo="Guardian")})),t.getEncounters(e.visitDate).then((function(e){var t=[];e.forEach((function(e){t.push(e.encounter_id)})),a.encounters=[].concat(t)})),t.patientVisits.push(a)}))}},mounted:function(){var e=this;this.getVisits(),p["a"].$on("reload-visits",(function(t){e.patientVisits=[],e.encountersToDelete=[],e.getVisits()}))}},T=k,R=(a("662c"),Object(g["a"])(T,y,w,!1,null,"4894abcd",null)),O=R.exports,P=a("8740"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vitals",{ref:"vitals",on:{addEncounter:e.addEncounter}}),a("consultation",{ref:"consultation",on:{addEncounter:e.addEncounter}}),a("prescription",{ref:"prescription",on:{addEncounter:e.addEncounter}}),a("reception",{ref:"reception",on:{addEncounter:e.addEncounter}}),a("appointment",{ref:"appointment",on:{addEncounter:e.addEncounter}}),a("button",{staticClass:"btn btn-primary",on:{click:e.createEncounters}},[!0===e.posting?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[e._v("Loading...")])]:[a("span",[e._v("Save")])]],2)],1)},$=[],D=(a("caad"),a("2532"),a("53ba")),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row "},[e._m(0),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"patient",disabled:e.hasWeight},domProps:{checked:e._q(e.patient.value_coded,"1065")},on:{change:function(t){return e.$set(e.patient,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"patient",disabled:e.hasWeight},domProps:{checked:e._q(e.patient.value_coded,"1066")},on:{change:function(t){return e.$set(e.patient,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])]),e._m(1),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"guardian",disabled:e.hasWeight},domProps:{checked:e._q(e.guardian.value_coded,"1065")},on:{change:function(t){return e.$set(e.guardian,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"guardian",disabled:e.hasWeight},domProps:{checked:e._q(e.guardian.value_coded,"1066")},on:{change:function(t){return e.$set(e.guardian,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])])])])},j=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Drugs given to patient")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Drugs given to guardian")])])}],A={data:function(){return{patient:{value_coded:null,concept_id:1805},guardian:{value_coded:null,concept_id:2122},hasWeight:!1}},methods:{saveEncounter:function(){var e={reception:{encounter_id:51,obs:{patient:this.patient,guardian:this.guardian}}};this.$emit("addEncounter",e)},setPresent:function(){"1066"===this.patient.value_coded?this.guardian.value_coded="1065":"1065"===this.patient.value_coded?this.guardian.value_coded="1066":"1066"===this.guardian.value_coded?this.patient.value_coded="1065":"1065"===this.guardian.value_coded&&(this.patient.value_coded="1066"),p["a"].$emit("set-present",this.patient.value_coded)}},watch:{patient:{handler:function(e){this.setPresent()},deep:!0},guardian:{handler:function(e){this.setPresent()},deep:!0}},mounted:function(){var e=this;p["a"].$on("set-weight",(function(t){null!==t&&""!==t&&0!==t?(e.patient.value_coded="1065",e.guardian.value_coded="1066",e.hasWeight=!0):(e.patient.value_coded=null,e.guardian.value_coded=null,e.hasWeight=!1)}))}},I=A,V=Object(g["a"])(I,N,j,!1,null,null,null),Y=V.exports,q=a("f91c"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group mb-3"},[e._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date.value_datetime,expression:"date.value_datetime"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:e.date.value_datetime},on:{input:function(t){t.target.composing||e.$set(e.date,"value_datetime",t.target.value)}}})])},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"height"}},[e._v("Appointment Date")])])}],L={data:function(){return{date:{value_datetime:null,concept_id:5096}}},methods:{saveEncounter:function(){var e={hiv_staging:{encounter_id:7,obs:{date:this.date}}};this.$emit("addEncounter",e)}}},B=L,W=Object(g["a"])(B,M,F,!1,null,null,null),H=W.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e.isFemale?a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pregnant.value_coded,expression:"pregnant.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065"},domProps:{checked:e._q(e.pregnant.value_coded,"1065")},on:{change:function(t){return e.$set(e.pregnant,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.pregnant.value_coded,expression:"pregnant.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066"},domProps:{checked:e._q(e.pregnant.value_coded,"1066")},on:{change:function(t){return e.$set(e.pregnant,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])]),e._m(1),a("div",{staticClass:"col"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.breastFeeding.value_coded,expression:"breastFeeding.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065"},domProps:{checked:e._q(e.breastFeeding.value_coded,"1065")},on:{change:function(t){return e.$set(e.breastFeeding,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[e._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.breastFeeding.value_coded,expression:"breastFeeding.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066"},domProps:{checked:e._q(e.breastFeeding.value_coded,"1066")},on:{change:function(t){return e.$set(e.breastFeeding,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[e._v("No")])])])]):e._e(),a("div",{staticClass:"row"}),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.currentStatus,expression:"currentStatus"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.currentStatus=t.target.multiple?a:a[0]}}},e._l(Object.keys(e.tb_status),(function(t,n){return a("option",{key:n,domProps:{value:e.tb_status[t]}},[e._v(" "+e._s(t)+" ")])})),0)]),e._m(3),a("div",{staticClass:"col"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.hasSE,expression:"hasSE"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineCheckbox1",value:"true"},domProps:{checked:Array.isArray(e.hasSE)?e._i(e.hasSE,"true")>-1:e.hasSE},on:{change:function(t){var a=e.hasSE,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s="true",r=e._i(a,s);n.checked?r<0&&(e.hasSE=a.concat([s])):r>-1&&(e.hasSE=a.slice(0,r).concat(a.slice(r+1)))}else e.hasSE=i}}})]),a("div",{staticClass:"form-check form-check-inline"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasSE,expression:"hasSE"}],staticClass:"row"},[e._l(Object.keys(e.sideEffects),(function(t,n){return a("div",{key:n,staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.sides,expression:"sides"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.sideEffects[t],checked:Array.isArray(e.sides)?e._i(e.sides,e.sideEffects[t])>-1:e.sides},on:{change:function(a){var n=e.sides,i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=e.sideEffects[t],o=e._i(n,r);i.checked?o<0&&(e.sides=n.concat([r])):o>-1&&(e.sides=n.slice(0,o).concat(n.slice(o+1)))}else e.sides=s}}}),e._v(" "+e._s(t)+" ")])])])})),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.otherSE,expression:"otherSE"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(e.otherSE)?e._i(e.otherSE,"true")>-1:e.otherSE},on:{change:function(t){var a=e.otherSE,n=t.target,i=!!n.checked;if(Array.isArray(a)){var s="true",r=e._i(a,s);n.checked?r<0&&(e.otherSE=a.concat([s])):r>-1&&(e.otherSE=a.slice(0,r).concat(a.slice(r+1)))}else e.otherSE=i}}}),e._v(" Other ")])])])],2)]),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:e.otherSE,expression:"otherSE"}],staticClass:"container-fluid"},[a("p",[e._v("Other Side Effects / Contraindications")]),a("div",{staticClass:"row"},e._l(Object.keys(e.otherSideEffects),(function(t,n){return a("div",{key:n,staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.otherSides,expression:"otherSides"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:e.otherSideEffects[t],checked:Array.isArray(e.otherSides)?e._i(e.otherSides,e.otherSideEffects[t])>-1:e.otherSides},on:{change:function(a){var n=e.otherSides,i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=e.otherSideEffects[t],o=e._i(n,r);i.checked?o<0&&(e.otherSides=n.concat([r])):o>-1&&(e.otherSides=n.slice(0,o).concat(n.slice(o+1)))}else e.otherSides=s}}}),e._v(" "+e._s(t)+" ")])])])})),0)]),a("br")])])},z=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Pregnant")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("Breastfeeding")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[e._v("TB Status")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col d-flex justify-content-start"},[a("label",{staticClass:"form-check-label",attrs:{for:"inlineCheckbox1"}},[e._v("Has Side Effects / Contraindications?")])])}],U={data:function(){return{pregnant:{value_coded:null,concept_id:6131},breastFeeding:{value_coded:null,concept_id:7965},onTb:{value_coded:null,concept_id:2690},currentStatus:null,fpm:{"Oral contraceptive pills":780,"Depo-Provera":907,"Intrauterine device/loop":5275,Implant:7857,"Male condoms":7858,"Female condoms":7859,"Tubal ligation":1719,"None of the above":1107},tb_status:{"TB NOT suspected":7454,"TB suspected":7455,"Confirmed TB NOT on treatment":7456,"Confirmed TB on treatment":7458},drugs:{ARVs:1085,CPT:916,IPT:656},tbSymptoms:{"cough of any duration":8261,fever:5945,"night sweats":6029,"Weight loss / Failure to thrive / malnutritionweight loss":8260},sideEffects:{"peripheral neuropathy":821,jaundice:215,lipodystrophy:2148,"kidney failure":9242,psychosis:219,gynaecomastia:9440,anemia:3,"skin rash":512,insomnia:867},otherSideEffects:{fever:5945,vomiting:5980,dizziness:877,headache:620,nausea:5978,"weight loss":8260,"lactic acidosis":1458,cough:107},prescribedFPM:[],currentFPM:[],sides:[],otherSides:[],tbSymps:[],drugsToPrescribe:[],onFP:!1,prescribeFP:!1,hasSE:!1,otherSE:!1,hasTBSymps:!1,statusTB:null}},computed:{isFemale:function(){return!0}},methods:{saveEncounter:function(){var e=this,t={consultation:{encounter_id:53,obs:{tb:{value_coded:this.currentStatus,concept_id:7459}}}};this.isFemale&&(t.consultation.obs.pregnant=this.pregnant,t.consultation.obs.breastFeeding=this.breastFeeding,t.consultation.obs.onFP={concept_id:1717,value_coded:1066},Object.keys(this.fpm).forEach((function(a){t.consultation.obs["pres"+a]={concept_id:e.fpm[a],value_coded:e.getCoded(e.prescribedFPM,e.fpm[a])}})),Object.keys(this.fpm).forEach((function(a){t.consultation.obs["curr"+a]={concept_id:e.fpm[a],value_coded:e.getCoded(e.currentFPM,e.fpm[a])}})),this.onFP&&(t.consultation.obs.onFP.value_coded=1065)),Object.keys(this.sideEffects).forEach((function(a){t.consultation.obs[a]={concept_id:7755,value_coded:e.sideEffects[a],child:{concept_id:e.sideEffects[a],value_coded:e.getCoded(e.sides,e.sideEffects[a])}}})),Object.keys(this.otherSideEffects).forEach((function(a){t.consultation.obs[a]={concept_id:7951,value_coded:e.otherSideEffects[a],child:{concept_id:e.otherSideEffects[a],value_coded:e.getCoded(e.otherSides,e.otherSideEffects[a])}}})),Object.keys(this.tbSymptoms).forEach((function(a){t.consultation.obs[a]={concept_id:e.tbSymptoms[a],value_coded:e.tbSymptoms[a],child:{concept_id:e.tbSymptoms[a],value_coded:e.getCoded(e.tbSymps,e.tbSymptoms[a])}}})),this.drugsToPrescribe.forEach((function(e){t.consultation.obs[e]={concept_id:1282,value_coded:e}})),this.$emit("addEncounter",t)},getCoded:function(e,t){return e.includes(t)?1065:1066}},watch:{onTb:{handler:function(e){p["a"].$emit("set-tb",this.onTb.value_coded)},deep:!0}}},Z=U,J=(a("fe55"),Object(g["a"])(Z,G,z,!1,null,"30607f01",null)),Q=J.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[e._v("Regimen")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRegimen,expression:"selectedRegimen"}],staticClass:"form-control",attrs:{id:"inputState"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedRegimen=t.target.multiple?a:a[0]}}},e._l(e.regimens,(function(t,n){return a("option",{key:n},[e._v(e._s(n))])})),0)]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[e._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ARVquantity,expression:"ARVquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:e.ARVquantity},on:{input:function(t){t.target.composing||(e.ARVquantity=t.target.value)}}})])]),a("div",{staticClass:"form-row"},[e._m(0),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[e._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.CPTquantity,expression:"CPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:e.CPTquantity},on:{input:function(t){t.target.composing||(e.CPTquantity=t.target.value)}}})])]),a("div",{staticClass:"form-row"},[e._m(1),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[e._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.IPTquantity,expression:"IPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:e.IPTquantity},on:{input:function(t){t.target.composing||(e.IPTquantity=t.target.value)}}})])])])},X=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[e._v("CPT")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[e._v("IPT")])])}],ee=(a("498a"),{data:function(){return{regimens:[],selectedRegimen:null,selectedDrugs:[],drugOrder:[],nextAppointment:null,ARVquantity:null,CPTquantity:null,IPTquantity:null,prescribeARVs:!1,prescribeCPT:!1,prescribeIPT:!1,weight:null,latestWeight:null,CPTRegimens:[],IPTRegimens:[],onTb:!1}},methods:{getRegimens:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$route.params.id,e.next=3,d["a"].get("/programs/1/regimens?weight=".concat(this.weight,"&tb_dosage=true")).then((function(e){e.json().then((function(e){a.regimens=e}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCPT:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$route.params.id,e.next=3,d["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=Cotrimoxazole")).then((function(e){e.json().then((function(e){t.CPTRegimens=e}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getIPT:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$route.params.id,e.next=3,d["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=INH")).then((function(e){e.json().then((function(e){t.IPTRegimens=e}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveEncounter:function(){var e=this,t=[];this.selectedDrugs=[];var a=this.regimens[this.selectedRegimen],n={};this.ARVquantity&&(a.forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.ARVquantity})})),n.prescribeARV={concept_id:1282,value_coded:1085}),this.CPTquantity&&(this.CPTRegimens.forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.CPTquantity})})),n.prescribeCPT={concept_id:1282,value_coded:916}),this.IPTquantity&&(this.IPTRegimens.forEach((function(t){e.selectedDrugs.push({drug_name:t.drug_name,drug_id:t.drug_id,units:t.units,am:t.am,pm:t.pm,quantity:e.IPTquantity})})),n.prescribeIPT={concept_id:1282,value_coded:656});for(var i=0;i<this.selectedDrugs.length;i++){var s=parseFloat(this.selectedDrugs[i]["am"]),r=parseFloat(this.selectedDrugs[i]["pm"]),o="ONCE A DAY (OD)",c=s+r,u=this.selectedDrugs[i].drug_name+":- Morning: "+s+" tab(s), Evening: "+r+" tabs",l=0;0==r&&(l=s),0==s&&(l=r),s>0&&r>0&&(o="TWICE A DAY (BD)",l=(s+r)/2);var d={drug_inventory_id:this.selectedDrugs[i].drug_id,dose:l,equivalent_daily_dose:c,frequency:o,start_date:f()().format("YYYY-MM-DD"),auto_expire_date:f()().add(this.quantity/c+2,"days").format("YYYY-MM-DD"),instructions:u,units:this.selectedDrugs[i].units,quantity:this.selectedDrugs[i].quantity};"Cotrimoxazole (480mg tablet)"===this.selectedDrugs[i].drug_name||t.push(d)}var p={prescription:{encounter_id:25,drug_orders:t}},m={consultation2:{encounter_id:53,obs:n}};this.$emit("addEncounter",p),this.$emit("addEncounter",m)}},mounted:function(){var e=this;this.getRegimens();p["a"].$on("set-weight",(function(t){e.selectedRegimen=null,""===t.trim()?e.weight=e.latestWeight:e.weight=t,e.getRegimens(),e.getCPT(),e.getIPT()})),p["a"].$on("set-initial-weight",(function(t){e.latestWeight=t,e.weight=t,e.getRegimens(),e.getCPT(),e.getIPT()})),p["a"].$on("set-present",(function(t){e.selectedRegimen=null,"1066"===t&&(e.weight=e.latestWeight,e.getRegimens(),e.getCPT(),e.getIPT())})),p["a"].$on("set-tb",(function(t){e.onTb="1065"===t}))}}),te=ee,ae=Object(g["a"])(te,K,X,!1,null,null,null),ne=ae.exports,ie=a("cf40"),se={props:["date"],data:function(){return{encounters:{},numEnc:0,patientPresent:!1,posting:!1,verifiedEnc:[]}},components:{vitals:D["a"],"clinic-registration":P["a"],reception:Y,appointment:H,staging:q["a"],consultation:Q,prescription:ne},methods:{addEncounter:function(e){var t=Object.keys(e)[0];this.encounters[t]=e[t]},saveEncounter:function(e){var t=this,a=[],n={url:"observations"};Object.keys(e).includes("obs")?(Object.keys(e.obs).forEach((function(n){var i=e.obs[n][t.getExpected(e.obs[n])];null!==i&&""!==i&&a.push(e.obs[n])})),n.observations=a,a.length>0&&(this.verifiedEnc.push(e.encounter_id),this.postEncounter(n,e.encounter_id))):Object.keys(e).includes("drug_orders")&&(n.drug_orders=e.drug_orders,n.url="drug_orders",n.drug_orders.length>0&&(this.verifiedEnc.push(e.encounter_id),this.postEncounter(n,e.encounter_id)))},postEncounter:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,a){var n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$route.params.id,e.next=3,ie["a"].createEncounter(n,a,this.date);case 3:if(i=e.sent,this.successfulOperation=!0,201!==i.status&&200!==i.status){e.next=14;break}return s=i.encounter_id,t.encounter_id=s,e.next=10,d["a"].post(t.url,t);case 10:r=e.sent,201===r.status||200===r.status?(this.numEnc++,this.numEnc===this.verifiedEnc.length&&(this.posting=!1,p["a"].$emit("reload-visits",""),this.$toasted.show("Encounter Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","encounter-modal","#btnShow")),this.success=!0,this.fail=!1,this.postResponse="Appointment has been set."):(this.$toasted.show("Some Observations failed to save !!",{theme:"toasted-primary",position:"top-right",duration:5e3}),this.fail=!0,this.postResponse="Appointment could not be set."),e.next=17;break;case 14:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 17:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),createEncounters:function(){var e=this;this.posting=!0;var t=Object.keys(this.$refs);t.forEach((function(t){e.$refs[t].saveEncounter()}));var a=Object.keys(this.encounters);a.forEach((function(t){e.saveEncounter(e.encounters[t])}))},getExpected:function(e){var t=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],a="";return Object.keys(e).filter((function(e){t.includes(e)&&(a=e)})),a},removeModal:function(){var e=document.getElementById("exampleModalCenter");e.classList.remove("show"),e.setAttribute("aria-hidden","true"),e.setAttribute("style","display: none");var t=document.getElementsByClassName("modal-backdrop");document.body.removeChild(t[0])}},mounted:function(){var e=this;p["a"].$on("set-present",(function(t){e.patientPresent="1066"!==t}))}},re=se,oe=Object(g["a"])(re,S,$,!1,null,null,null),ce=oe.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[e._m(0),e.states.length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:e.state,expression:"state"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.state=t.target.multiple?a:a[0]}}},e._l(e.states,(function(t,n){return a("option",{key:n,domProps:{value:{state_id:t.program_workflow_state_id,name:t.name}}},[e._v(" "+e._s(t.name)+" ")])})),0):e._e()])]),a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[e._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date","aria-label":"Default","aria-describedby":"inputGroup-sizing-default"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])])]),"Patient transferred out"===e.state.name?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[e._v("Test Location")]),a("v-select",{attrs:{options:e.locations},on:{search:e.getlocations,input:e.getVal}})],1):e._e(),a("div",{staticClass:"text-center"},e._l(e.errors,(function(t,n){return a("p",{key:n,staticStyle:{color:"red"}},[e._v(" "+e._s(t))])})),0),a("button",{staticClass:"btn btn-primary",on:{click:e.postOutcome}},[e._v("Submit")])])},le=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"height"}},[e._v("Outcome")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._v("Outcome Date")])])}],de=(a("6dfc"),a("4a7a")),pe=a.n(de),me={components:{"v-select":pe.a},data:function(){return{states:[],errors:[],state:{},date:null,locations:[],location:null}},methods:{getOutcomes:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].get("/programs/1/workflows").then((function(e){e.json().then((function(e){t.states=e[0].states}))}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),postOutcome:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.errors=[],0===Object.keys(this.state).length&&this.errors.push("Outcome is required"),null!==this.date&&""!==this.date||this.errors.push("Date is required"),t={state:this.state.state_id,date:f()(this.date).format("YYYY-MM-DD")},"Patient transferred out"===this.state.name&&(t.location_id=this.location,null==this.location&&this.errors.push("Location is required")),0!==this.errors.length){e.next=11;break}return a=this.$route.params.id,e.next=9,d["a"].post("programs/1/patients/".concat(a,"/states"),t);case 9:n=e.sent,201===n.status||200===n.status?(p["a"].$emit("reload-visits",""),this.$toasted.show("Outcome Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","outcome-modal","#btnShow")):console.log("Failed to update");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getlocations:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.locations=[],e.next=3,d["a"].get("/locations?name="+t).then((function(e){e.json().then((function(e){e.forEach((function(e){a.locations.push({label:e.name,code:e.name,location_id:e.location_id})}))}))}));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVal:function(e){this.location=e.location_id}},mounted:function(){this.getOutcomes()}},ve=me,fe=Object(g["a"])(ve,ue,le,!1,null,null,null),he=fe.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:e.options,placeholder:"modifier"},model:{value:e.modifier,callback:function(t){e.modifier=t},expression:"modifier"}})],1)]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[e._v("Viral Load")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.viralLoad,expression:"viralLoad"}],staticClass:"form-control",attrs:{type:"number",name:"",id:"",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.viralLoad},on:{input:function(t){t.target.composing||(e.viralLoad=t.target.value)}}}),a("label",{attrs:{for:""}},[e._v("Date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",name:"",id:"date",placeholder:"","aria-describedby":"helpId"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}})])])]),a("br"),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:e.saveEncounter}},[e._v("Save")])])])},ge=[],be={components:{"v-select":pe.a},data:function(){return{patient:{value_coded:null,concept_id:1805},guardian:{value_coded:null,concept_id:2122},options:["=",">","<","=>","=<"],modifier:null,viralLoad:null,date:null}},methods:{saveEncounter:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.id,a={order_type_id:4,concept_id:856,start_date:this.date,observation:{concept_id:856,obs_datetime:this.date,value_numeric:this.viralLoad,value_text:this.modifier}},n={order_type_id:4,concept_id:856,start_date:this.date,patient_id:t},e.next=5,ie["a"].createEncounter(t,13);case 5:if(i=e.sent,201!==i.status&&200!==i.status){e.next=24;break}return s=i.encounter_id,n.encounter_id=s,e.next=11,d["a"].post("orders",n);case 11:if(r=e.sent,201!==r.status&&200!==r.status){e.next=19;break}return e.next=15,d["a"].post("observations",{encounter_id:s,observations:[a.observation]});case 15:o=e.sent,201===o.status||200===o.status?(this.posting=!1,p["a"].$emit("reload-visits",""),this.$toasted.show("Viral Load Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","viral-load-modal","#btnShow")):(this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set."),e.next=22;break;case 19:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 22:e.next=27;break;case 24:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 27:console.log(a);case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},Ce=be,ye=Object(g["a"])(Ce,_e,ge,!1,null,null,null),we=ye.exports,xe={name:"home",components:{"top-nav":s["a"],"side-bar":r["a"],"patient-information":C,"visit-data":O,"clinic-registration":P["a"],encounter:ce,outcome:he,"viral-load":we},data:function(){return{date:f()().format("YYYY-MM-DD")}}},Ee=xe,ke=(a("29bc"),Object(g["a"])(Ee,n,i,!1,null,null,null));t["default"]=ke.exports},"9b3a":function(e,t,a){"use strict";var n=a("00a3"),i=a.n(n);i.a},a434:function(e,t,a){"use strict";var n=a("23e7"),i=a("23cb"),s=a("a691"),r=a("50c4"),o=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=a("ae40"),p=l("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,h=9007199254740991,_="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var a,n,l,d,p,m,g=o(this),b=r(g.length),C=i(e,b),y=arguments.length;if(0===y?a=n=0:1===y?(a=0,n=b-C):(a=y-2,n=f(v(s(t),0),b-C)),b+a-n>h)throw TypeError(_);for(l=c(g,n),d=0;d<n;d++)p=C+d,p in g&&u(l,d,g[p]);if(l.length=n,a<n){for(d=C;d<b-n;d++)p=d+n,m=d+a,p in g?g[m]=g[p]:delete g[m];for(d=b;d>b-n+a;d--)delete g[d-1]}else if(a>n)for(d=b-n;d>C;d--)p=d+n-1,m=d+a-1,p in g?g[m]=g[p]:delete g[m];for(d=0;d<a;d++)g[d+C]=arguments[d+2];return g.length=b-n+a,l}})},be43:function(e,t,a){},c8d2:function(e,t,a){var n=a("d039"),i=a("5899"),s="​᠎";e.exports=function(e){return n((function(){return!!i[e]()||s[e]()!=s||i[e].name!==e}))}},e496:function(e,t,a){},fe55:function(e,t,a){"use strict";var n=a("5bf7"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-3df1ea95.c294331e.js.map