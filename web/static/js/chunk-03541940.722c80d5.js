(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03541940"],{"27db":function(t,e,a){"use strict";var r=a("a4c6"),n=a.n(r);n.a},3310:function(t,e,a){"use strict";var r=a("978d"),n=a.n(r);n.a},"336a":function(t,e,a){"use strict";var r=a("df61"),n=a.n(r);n.a},"4dfe":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctrs"},[a("div",{staticClass:"ctr-table"},[a("div",{staticClass:"ctr-row"},[a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("button",{staticClass:"btn btn-success",on:{click:t.submitDates}},[t._v("Submit")])])])])])},n=[],s=a("f0ca"),i=a.n(s),o=a("c1df"),c=a.n(o),l=(a("6f3c"),a("1789")),u={components:{DatePick:i.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:l["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=c()(this.startDate).format("YYYY-MM-DD"),this.endDate=c()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(t,e){return l["a"].parse(t,e)},formatDate:function(t,e){return l["a"].format(t,e)}},mounted:function(){var t=this;setTimeout((function(){return t.initDates()}),300)}},d=u,h=(a("336a"),a("2877")),f=Object(h["a"])(d,r,n,!1,null,"15deca72",null);e["a"]=f.exports},"978d":function(t,e,a){},a4c6:function(t,e,a){},a781:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),a("div",{attrs:{id:"main-container"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12",staticStyle:{"z-index":"20"}},[a("span",[t._v(t._s(t.reportTitle)),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])]),a("sdPicker",{attrs:{onSubmit:t.fetchDates}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("b-overlay",{attrs:{show:t.hideReport,"spinner-type":"grow","spinner-variant":"primary"},scopedSlots:t._u([t.reportSelected?null:{key:"overlay",fn:function(){return[a("h1",[t._v("No Report Selected")])]},proxy:!0}],null,!0)},[a("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Age group")]),a("th",[t._v("Gender")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("Tx new (new on ART)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (receiving ART)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (received IPT)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (screened for TB)")])])]),a("tbody",{ref:"tableBody"})])])],1)])])],1)],1)},n=[],s=(a("b0c0"),a("d3b7"),a("ddb0"),a("5530")),i=(a("96cf"),a("1da1")),o=a("8051"),c=a("ebd8"),l=a("7c08"),u=a("c1df"),d=a.n(u),h=a("4dfe"),f=a("2f62"),p=a("1157"),m=a.n(p);a("6810");a("2cdf"),a("fd5e"),a("5caa"),a("c3dc"),a("4e95"),a("a8a1"),a("919c"),a("4b69"),a("7dae"),a("a821");var g={name:"reports",components:{"top-nav":c["a"],"side-bar":l["a"],sdPicker:h["a"]},methods:{fetchDates:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.startDate=t[0],e.endDate=t[1],a.next=5,e.initializeReport();case 5:e.reportLoading=!1,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.$router.push({name:"error",params:{message:"Failed to fetch disaggregated report: ".concat(a.t0.message)}});case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},initDataTable:function(){this.dTable=m()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,searching:!1,paging:!1,Processing:!0,ServerSide:!0,scrollY:"50vh",scroller:{loadingIndicator:!0},dom:"Bfrtip",buttons:[{extend:"copy",title:this.reportTitle},{extend:"csv",title:this.reportTitle},{extend:"pdf",title:this.reportTitle},{extend:"print",title:this.reportTitle}]})},checkResult:function(t){},datatableEnable:function(t){for(var e in this.formatedData=[],t);},addTableBody:function(){var t=this,e=["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"],a=this.$refs.tableBody;if(a){for(var r=1,n=["Female","Male"],s=0;s<n.length;s++)for(var i=0;i<e.length;i++){var o=document.createElement("tr");o.setAttribute("class",n[s]+"_row"),a.appendChild(o);var c=0;while(c<7){var l=document.createElement("td");o.appendChild(l),0==c&&(l.innerHTML=r++),1==c&&(l.innerHTML=e[i]),2==c&&(l.innerHTML=n[s]),c>2&&(l.innerHTML=0,l.setAttribute("class","disaggregated-numbers")),o.appendChild(l),c++}}setTimeout((function(){return t.initDataTable()}),300)}},initializeReport:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="cohort_disaggregated",e+="?date="+d()().format("YYYY-MM-DD"),e+="&quarter=Custom",e+="&age_group="+this.ageGroups[0],e+="&rebuild_outcome="+this.rebuildOutcome,e+="&initialize="+this.initialize,e+="&start_date="+this.startDate,e+="&end_date="+this.endDate,e+="&program_id=1",this.reportLoading=!0,this.reportSelected=!0,this.initialize=!1,t.next=14,o["a"].get(e,{},{});case 14:if(a=t.sent,200!==a.status){t.next=25;break}return this.rebuildOutcome=!1,t.t0=this,t.next=20,a.json();case 20:return t.t1=t.sent,t.next=23,t.t0.addData.call(t.t0,t.t1);case 23:t.next=25;break;case 25:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i,o,c,l,u,d,h,f,p;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r=e.$refs.tableBody.children,i=0;i<r.length;i++)for(o=r[i].children,c=0;c<o.length;c++)o[c].innerHTML==e.ageGroups[0]&&("Female"==o[2].innerHTML?n=r[i]:s=r[i]);for(l in t)for(d in u=t[l],u)h="F"==d?n:s,f=t[l][d],p=h.children,p[3].innerHTML=f.tx_new,p[4].innerHTML=f.tx_curr,e.screenedTB.push([p[6],d,l]),e.givenIPT.push([p[5],d,l]),"M"==d?(e.totalMales[0]+=f.tx_new,e.totalMales[1]+=f.tx_curr):(e.totalFemales[0]+=f.tx_new,e.totalFemales[1]+=f.tx_curr);if(e.ageGroups.length>0&&e.ageGroups.shift(),!(e.ageGroups.length>0)){a.next=9;break}return a.next=7,e.initializeReport();case 7:a.next=11;break;case 9:return a.next=11,e.addTBscreenedData();case 11:case"end":return a.stop()}}),a)})))()},addTBscreenedData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.screenedTB[0][2],a=this.screenedTB[0][1],r=this.screenedTB[0][0],n="screened_for_tb",n+="?date="+d()().format("YYYY-MM-DD"),n+="&outcome_table=temp_patient_outcomes",n+="&age_group="+e,n+="&gender="+a,n+="&start_date="+this.startDate,n+="&end_date="+this.endDate,n+="&program_id=1",console.log(n),t.next=14,o["a"].get(n,{},{});case 14:if(s=t.sent,200!==s.status){t.next=33;break}return this.screenedTB.shift(),t.t0=this,t.t1=r,t.t2=a,t.next=22,s.json();case 22:if(t.t3=t.sent,t.t0.TBscreened.call(t.t0,t.t1,t.t2,t.t3),!(this.screenedTB.length<1)){t.next=29;break}return t.next=27,this.addGivenIPTdata();case 27:t.next=31;break;case 29:return t.next=31,this.addTBscreenedData();case 31:t.next=33;break;case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addGivenIPTdata:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.givenIPT[0][2],a=this.givenIPT[0][1],r=this.givenIPT[0][0],n="clients_given_ipt",n+="?date="+d()().format("YYYY-MM-DD"),n+="&outcome_table=temp_patient_outcomes",n+="&age_group="+e,n+="&gender="+a,n+="&start_date="+this.startDate,n+="&end_date="+this.endDate,n+="&program_id=1",t.next=13,o["a"].get(n,{},{});case 13:if(s=t.sent,200!==s.status){t.next=32;break}return this.givenIPT.shift(),t.t0=this,t.t1=r,t.t2=a,t.next=21,s.json();case 21:if(t.t3=t.sent,t.t0.iptGiven.call(t.t0,t.t1,t.t2,t.t3),!(this.givenIPT.length<1)){t.next=28;break}return t.next=26,this.allMales();case 26:t.next=30;break;case 28:return t.next=30,this.addGivenIPTdata();case 30:t.next=32;break;case 32:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),iptGiven:function(t,e,a){t.innerHTML=a.length,"M"==e?this.totalMales[2]+=a.length:this.totalFemales[2]+=a.length},TBscreened:function(t,e,a){t.innerHTML=a.length,"M"==e?this.totalMales[3]+=a.length:this.totalFemales[3]+=a.length},allMales:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dTable.fnAddData(["31","All","Male",t.totalMales[0],t.totalMales[1],t.totalMales[2],t.totalMales[3]]),e.next=3,t.getAllFemale("Pregnant");case 3:case"end":return e.stop()}}),e)})))()},getAllFemale:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="cohort_disaggregated",a+="?date="+d()().format("YYYY-MM-DD"),a+="&outcome_table=temp_patient_outcomes",a+="&age_group="+e,a+="&start_date="+this.startDate,a+="&end_date="+this.endDate,a+="&program_id=1",a+="&quarter=Custom",a+="&initialize=false",a+="&rebuild_outcome="+this.rebuildOutcome,t.next=12,o["a"].get(a,{},{});case 12:if(r=t.sent,200!==r.status){t.next=21;break}return t.t0=this,t.t1=e,t.next=18,r.json();case 18:return t.t2=t.sent,t.next=21,t.t0.addNewFemaleRow.call(t.t0,t.t1,t.t2);case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addNewFemaleRow:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,s,i,o,c,l,u,d,h,f,p,m,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.t0=regeneratorRuntime.keys(e);case 1:if((r.t1=r.t0()).done){r.next=30;break}n=r.t1.value,s=e[n],r.t2=regeneratorRuntime.keys(s);case 5:if((r.t3=r.t2()).done){r.next=28;break}if(i=r.t3.value,o=e[n][i].tx_new,c=e[n][i].tx_curr,l=e[n][i].tx_screened_for_tb,u=e[n][i].tx_given_ipt,"Pregnant"!=t){r.next=20;break}return d=a.dTable.fnAddData(["32","All","FP",o,c,u,l]),h=a.dTable.fnSettings(),f=h.aoData[d[0]].nTr,a.fpRow=f,r.next=18,a.getAllFemale("Breastfeeding");case 18:r.next=26;break;case 20:return p=a.dTable.fnAddData(["33","All","Fbf",o,c,u,l]),m=a.dTable.fnSettings(),g=m.aoData[p[0]].nTr,a.fbfRow=g,r.next=26,a.loadFPdata("pregnant","screened_for_tb");case 26:r.next=5;break;case 28:r.next=1;break;case 30:case"end":return r.stop()}}),r)})))()},loadFPdata:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a,r+="?date="+d()().format("YYYY-MM-DD"),r+="&start_date="+this.startDate,r+="&end_date="+this.endDate,r+="&gender="+e,r+="&age_group="+e,r+="&outcome_table=temp_patient_outcomes",r+="&program_id=1",t.next=10,o["a"].get(r,{},{});case 10:if(n=t.sent,200!==n.status||"pregnant"!=e||"screened_for_tb"!=a){t.next=22;break}return t.t0=this,t.t1=this.fpRow,t.next=16,n.json();case 16:return t.t2=t.sent.length,t.t0.assignValueTD.call(t.t0,t.t1,t.t2,2),t.next=20,this.loadFPdata("breastfeeding",a);case 20:t.next=53;break;case 22:if(200!==n.status||"breastfeeding"!=e||"screened_for_tb"!=a){t.next=33;break}return t.t3=this,t.t4=this.fbfRow,t.next=27,n.json();case 27:return t.t5=t.sent.length,t.t3.assignValueTD.call(t.t3,t.t4,t.t5,2),t.next=31,this.loadFPdata("pregnant","clients_given_ipt");case 31:t.next=53;break;case 33:if(200!==n.status||"pregnant"!=e){t.next=44;break}return t.t6=this,t.t7=this.fpRow,t.next=38,n.json();case 38:return t.t8=t.sent.length,t.t6.assignValueTD.call(t.t6,t.t7,t.t8,1),t.next=42,this.loadFPdata("breastfeeding",a);case 42:t.next=53;break;case 44:if(200!==n.status||"breastfeeding"!=e){t.next=53;break}return t.t9=this,t.t10=this.fbfRow,t.next=49,n.json();case 49:return t.t11=t.sent.length,t.t9.assignValueTD.call(t.t9,t.t10,t.t11,1),t.next=53,this.addAllFemaleRow();case 53:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),assignValueTD:function(t,e,a){1==a?m()("td",t)[5].innerHTML=e:m()("td",t)[6].innerHTML=e},addAllFemaleRow:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=t.$refs.tableBody.children,r=0;r<a.length;r++)n=a[r].children[0],s=a[r].children,"32"!=n.innerHTML&&"33"!=n.innerHTML||(t.totalFemales[0]-=parseInt(s[3].innerHTML),t.totalFemales[1]-=parseInt(s[4].innerHTML),t.totalFemales[2]-=parseInt(s[5].innerHTML),t.totalFemales[3]-=parseInt(s[6].innerHTML));return t.dTable.fnAddData(["34","All","FNP",t.totalFemales[0],t.totalFemales[1],t.totalFemales[2],t.totalFemales[3]]),t.dTable.fnDestroy(),e.next=6,t.initDataTable();case 6:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;setTimeout((function(){return t.addTableBody()}),300)},data:function(){return{reportData:null,reportSelected:!1,reportLoading:!1,dTable:null,formatedData:[],rebuildOutcome:!0,startDate:null,endDate:null,screenedTB:[],givenIPT:[],totalMales:[0,0,0,0],totalFemales:[0,0,0,0],fpRow:null,fbfRow:null,initialize:!1,ageGroups:["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"].reverse()}},computed:Object(s["a"])(Object(s["a"])({},Object(f["c"])(["location"])),{},{hideReport:function(){return this.reportLoading||!this.reportSelected},reportTitle:function(){return"".concat(this.location.name," MoH Disaggregated")}})},b=g,v=(a("3310"),a("27db"),a("2877")),x=Object(v["a"])(b,r,n,!1,null,"6aafbe96",null);e["default"]=x.exports},df61:function(t,e,a){}}]);
//# sourceMappingURL=chunk-03541940.722c80d5.js.map