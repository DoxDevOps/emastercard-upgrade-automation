{"version":3,"sources":["webpack:///./src/views/SurvivalAnalysis.vue?5b20","webpack:///./src/components/reportDatePicker.vue?979b","webpack:///src/components/reportDatePicker.vue","webpack:///./src/components/reportDatePicker.vue?82be","webpack:///./src/components/reportDatePicker.vue?74a4","webpack:///./src/components/reports/ReportOverlay.vue?a50a","webpack:///src/components/reports/ReportOverlay.vue","webpack:///./src/components/reports/ReportOverlay.vue?31b3","webpack:///./src/components/reports/ReportOverlay.vue","webpack:///./src/views/SurvivalAnalysis.vue?5d0b","webpack:///src/views/SurvivalAnalysis.vue","webpack:///./src/views/SurvivalAnalysis.vue?d9d0","webpack:///./src/views/SurvivalAnalysis.vue?cda2","webpack:///./src/components/reportDatePicker.vue?38e4","webpack:///./src/views/SurvivalAnalysis.vue?9c81"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_l","quarter","index","key","domProps","_s","ref","on","$event","selectQuarter","staticRenderFns","data","quarters","props","methods","onSubmit","qtr","qtrs","push","count","curr_year","i","mounted","loadQuarters","component","hideReport","scopedSlots","_u","fn","staticStyle","reportSelected","_e","proxy","_t","name","reportLoading","type","Boolean","required","default","computed","fetchData","moment","format","EMCVersion","APIVersion","components","ReportOverlay","reportDatePicker","redirect","$router","fetchSurvivalAnalysisData","dTable","fnClearTable","qinterval","alive","outcome","c","defaulted","died","stopped","to","unknown","total_reg","addClass","tr","document","getElementById","id","cells","getElementsByTagName","setAttribute","initDataTable","order","fixedHeader","searching","paging","Processing","ServerSide","scroller","loadingIndicator","dom","buttons","columnDefs","reportQtr","regenerateReport","reportData","reportID","sessionStorage","reportTitle","setTimeout"],"mappings":"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","file":"js/chunk-5552b546.a31b5fb2.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=style&index=1&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"control-container\"},[_c('select',{attrs:{\"id\":\"quarters\"}},[_c('option',[_vm._v(\"Select cohort quarter\")]),_vm._l((_vm.quarters),function(quarter,index){return _c('option',{key:index,domProps:{\"value\":quarter}},[_vm._v(\" \"+_vm._s(quarter)+\" \")])})],2),_c('button',{ref:\"myid\",staticClass:\"btn btn-primary\",attrs:{\"id\":\"submit-btn\"},on:{\"click\":function($event){return _vm.selectQuarter(false)}}},[_vm._v(\"Archived report (if available)\")]),_c('button',{ref:\"myid\",staticClass:\"btn btn-danger\",attrs:{\"id\":\"generate-btn\"},on:{\"click\":function($event){return _vm.selectQuarter(true)}}},[_vm._v(\"Fresh report\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"control-container\">\n\n    <select id=\"quarters\">\n      <option>Select cohort quarter</option>\n      <option v-for=\"(quarter, index) in quarters\" v-bind:key=\"index\" :value=\"quarter\">\n        {{quarter}}\n      </option>\n    </select>\n    <button class=\"btn btn-primary\" @click=\"selectQuarter(false)\" id=\"submit-btn\" ref=\"myid\">Archived report (if available)</button>\n    <button class=\"btn btn-danger\" @click=\"selectQuarter(true)\" id=\"generate-btn\" ref=\"myid\">Fresh report</button>\n\n  </div>\n</template>\n\n<script>\n\n\nexport default {\n  data: function() {\n    return {\n      quarters: []\n    }\n  },\n  props: [\"onSubmit\"],\n  methods: {\n    selectQuarter: function(e) {\n      //this.$refs.myid.disabled=true;\n      let qtr = (quarters.value ? [quarters.value, e] : []);\n      //let qtr = (quarters.value ? quarters.value : null);\n      this.onSubmit(qtr);\n  },\n  enableBTN: function() {\n    this.$refs.myid.disabled=false;\n  },\n  loadQuarters() {\n    var qtrs = [];\n    var current_qtr = \"\";\n    var curr_date = new Date();\n    curr_date = new Date(curr_date.getFullYear() +'-'+ (curr_date.getMonth()+1) +'-'+ curr_date.getDate() + \" 00:00\");\n    var curr_year = curr_date.getFullYear();\n\n    if(  curr_date >= (new Date(curr_year + '-01-01 00:00')) && curr_date <= (new Date(curr_year + '-03-31 00:00'))  ){\n      current_qtr = '1 ' + curr_year;\n    }else if ( curr_date >= (new Date(curr_year + '-04-01 00:00')) && curr_date <= (new Date(curr_year + '-06-30 00:00')) ){\n      current_qtr = '2 ' + curr_year;\n    }else if ( curr_date >= (new Date(curr_year + '-07-01 00:00')) && curr_date <= (new Date(curr_year + '-09-30 00:00')) ){\n      current_qtr = '3 ' + curr_year;\n    }else if ( curr_date >= (new Date(curr_year + '-10-01 00:00')) && curr_date <= (new Date(curr_year + '-12-31 00:00')) ){\n      current_qtr = '4 ' + curr_year;\n    }\n\n    var count = parseInt(current_qtr.substring(0,1));\n    var i = 0;\n\n    while(i < 5) { \n      if(i == 0)\n        this.addFollowingQ(qtrs, count, curr_year);\n        qtrs.push('Q' + count + ' ' + curr_year);\n        count = (count > 0 ? (count -= 1) : count);\n        curr_year = (count == 0 ? (curr_year - 1) : curr_year);\n        count = (count == 0 ? (count += 4) : count);\n\n        i++;\n    }\n\n  this.quarters = qtrs;\n},\n  addFollowingQ(qtrs, count, curr_year){\n    if(count < 4){\n      qtrs.push('Q' + (count + 1) + \" \" + curr_year);\n    }else{\n      qtrs.push('Q1' + \" \" + (curr_year + 1));\n    }\n  }\n},\n  mounted() {\n    this.loadQuarters();\n  }\n}\n// loadQuarters();\n</script>\n\n<style scoped>\n  .control-container {\n    text-align: right;\n    margin: 10px  0px 10px 0px;\n    width: 100%;\n    padding-right: 5px;\n  }\n\n  select {\n    margin-right: 10px;\n    height: 40px;\n    width: 250px;\n    vertical-align: top;\n  }\n\n  .control-container button {\n    height: 35px;\n    vertical-align: top;\n  }\n\n  .btn-danger {\n    margin-left: 15px;\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reportDatePicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reportDatePicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reportDatePicker.vue?vue&type=template&id=f39eba7c&scoped=true&\"\nimport script from \"./reportDatePicker.vue?vue&type=script&lang=js&\"\nexport * from \"./reportDatePicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reportDatePicker.vue?vue&type=style&index=0&id=f39eba7c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f39eba7c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-overlay',{attrs:{\"show\":_vm.hideReport,\"no-center\":true,\"spinner-type\":\"grow\",\"spinner-variant\":\"primary\"},scopedSlots:_vm._u([{key:\"overlay\",fn:function(){return [_c('div',{staticStyle:{\"display\":\"block\",\"min-height\":\"720px\",\"width\":\"100%\",\"padding-top\":\"20%\"}},[(!_vm.reportSelected)?_c('h1',[_vm._v(\"No Report Selected\")]):_vm._e(),(_vm.reportSelected)?_c('b-spinner',{attrs:{\"type\":\"grow\",\"variant\":\"primary\"}}):_vm._e()],1)]},proxy:true}])},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-overlay :show=\"hideReport\" :no-center=\"true\" spinner-type=\"grow\" spinner-variant=\"primary\">\n    <template v-slot:overlay>\n      <div style=\"display: block; min-height: 720px; width: 100%; padding-top: 20%\">\n        <h1 v-if=\"!reportSelected\">No Report Selected</h1>\n        <b-spinner v-if=\"reportSelected\" type=\"grow\" variant=\"primary\"></b-spinner>\n      </div>\n    </template>\n    <slot></slot>\n  </b-overlay>\n</template>\n\n<script>\nexport default {\n  name: 'report-overlay',\n  props: {\n    reportLoading: {\n      type: Boolean,\n      required: true\n    },\n    reportSelected: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    hideReport() {\n      return this.reportLoading || !this.reportSelected;\n    }\n  }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReportOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReportOverlay.vue?vue&type=template&id=c2504168&\"\nimport script from \"./ReportOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./ReportOverlay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"d-flex\",attrs:{\"id\":\"wrapper\"}},[_c('side-bar'),_c('div',{attrs:{\"id\":\"page-content-wrapper\"}},[_c('top-nav'),_c('div',{staticClass:\"cohort\"},[_c('report-date-picker',{attrs:{\"onSubmit\":_vm.fetchData}})],1),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\",\"margin-top\":\"25px\"}},[_c('select',{ref:\"subgroup\"},[_c('option',[_vm._v(\"Select sub group\")]),_c('option',{attrs:{\"value\":\"General\"}},[_vm._v(\"General\")]),_c('option',{attrs:{\"value\":\"Children\"}},[_vm._v(\"Children\")]),_c('option',{attrs:{\"value\":\"Women\"}},[_vm._v(\"Option B+\")])])]),_c('report-overlay',{attrs:{\"reportLoading\":_vm.reportLoading,\"reportSelected\":_vm.reportSelected}},[_c('table',{staticClass:\"display\",attrs:{\"id\":\"example\",\"width\":\"100%\"}},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"Reg cohort\")]),_c('th',[_vm._v(\"Interval (months)\")]),_c('th',[_vm._v(\"Sub group\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Total Reg (database)\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Total Reg (confirmed)\")]),_c('th',{staticClass:\"disaggregated-numbers count-separator\"},[_vm._v(\"Alive\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Died\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Defaulted\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Stopped\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"TO\")]),_c('th',{staticClass:\"disaggregated-numbers\"},[_vm._v(\"Unknown\")])])]),_c('tbody',{attrs:{\"id\":\"table-body\"}}),_c('tfoot',[_c('tr',[_c('td',[_vm._v(\" Date Created: \"+_vm._s(_vm.moment().format('YYYY-MM-DD:h:m:s'))+\" e-Mastercard Version : \"+_vm._s(_vm.EMCVersion)+\" API Version \"+_vm._s(_vm.APIVersion)+\" \")])])])])])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"d-flex\" id=\"wrapper\">\n      <!-- Sidebar -->\n      <side-bar />\n      <!-- /#sidebar-wrapper -->\n\n      <!-- Page Content -->\n      <div id=\"page-content-wrapper\">\n        <top-nav />\n        <!-- Page Content -->\n        <div class=\"cohort\">\n          <report-date-picker :onSubmit=\"fetchData\"></report-date-picker>\n        </div>\n\n        <div style=\"width:100%; text-align: right; margin-top: 25px;\">\n            <select ref=\"subgroup\">\n                <option>Select sub group</option>\n                <option value=\"General\">General</option>\n                <option value=\"Children\">Children</option>\n                <option value=\"Women\">Option B+</option>\n            </select>\n        </div>\n        <report-overlay :reportLoading=\"reportLoading\" :reportSelected=\"reportSelected\">\n          <table id=\"example\" class=\"display\" width=\"100%\">\n              <thead>\n                <tr>\n                  <th>Reg cohort</th>\n                  <th>Interval (months)</th>\n                  <th>Sub group</th>\n                  <th class=\"disaggregated-numbers\">Total Reg (database)</th>\n                  <th class=\"disaggregated-numbers\">Total Reg (confirmed)</th>\n                  <th class=\"disaggregated-numbers count-separator\">Alive</th>\n                  <th class=\"disaggregated-numbers\">Died</th>\n                  <th class=\"disaggregated-numbers\">Defaulted</th>\n                  <th class=\"disaggregated-numbers\">Stopped</th>\n                  <th class=\"disaggregated-numbers\">TO</th>\n                  <th class=\"disaggregated-numbers\">Unknown</th>\n                </tr>\n              </thead>\n              <tbody id=\"table-body\">\n              </tbody>\n              <tfoot>\n              <tr>\n                <td>\n                  Date Created:  {{moment().format('YYYY-MM-DD:h:m:s')}} \n                  e-Mastercard Version : {{EMCVersion}} \n                  API Version {{APIVersion}}\n                </td>\n              </tr>\n            </tfoot>\n            </table>\n        </report-overlay>\n\n        <!-- Page Content end -->\n      </div>\n    </div>\n\n  </div>\n</template>\n\n\n<script>\n// @ is an alias to /src\nimport ReportOverlay from \"../components/reports/ReportOverlay\";\nimport reportDatePicker from '@/components/reportDatePicker.vue';\nimport Sidebar from \"@/components/SideBar.vue\";\nimport TopNav from \"@/components/topNav.vue\";\nimport { mapState } from \"vuex\";\n\nimport moment from 'moment'\nimport ApiClient from \"../services/api_client\";\n\n\nimport jQuery from 'jquery';\nimport datatable from 'datatables'\n\nrequire(\"@/assets/datatable/css/bootstrap.css\");\nrequire(\"@/assets/datatable/css/dataTables.bootstrap4.min.css\");\n\n//require(\"@/assets/datatable/jquery-ui.css\");\nrequire(\"@/assets/datatable/css/buttons.dataTables.min.css\");\nrequire(\"@/assets/datatable/css/dataTables.jqueryui.min.css\")\n\n\n\nrequire(\"@/assets/datatable/js/buttons.flash.min.js\");\nrequire(\"@/assets/datatable/js/jszip.min.js\");\nrequire(\"@/assets/datatable/js/pdfmake.min.js\");\nrequire(\"@/assets/datatable/js/vfs_fonts.js\");\nrequire(\"@/assets/datatable/js/buttons.html5.min.js\");\nrequire(\"@/assets/datatable/js/buttons.print.min.js\");\n\n\n\nexport default {\n  name: \"reports\",\n  components: {\n    ReportOverlay,\n    \"top-nav\": TopNav,\n    \"side-bar\": Sidebar,\n    'report-date-picker': reportDatePicker\n  }, methods: {\n    redirect: function () {\n      this.$router.push('/moh');\n    },\n    async fetchData (report_parameters) {\n      try {\n        if(!report_parameters)\n          return;\n\n        this.reportQtr = report_parameters[0];\n        this.regenerateReport = report_parameters[1];\n        if(this.reportQtr == 'Select cohort quarter')\n          return;\n\n        if(this.$refs.subgroup.value == 'Select sub group')\n          return;\n\n        this.reportLoading = true;\n        this.reportSelected = true;\n        await this.fetchSurvivalAnalysisData();\n      } finally {\n        this.reportLoading = false;\n      }\n\n    },\n    fetchSurvivalAnalysisData: async function(){\n      let url = 'cohort_survival_analysis?date=' + moment().format('YYYY-MM-DD');\n      url += \"&quarter=\" + this.reportQtr;\n      url += \"&age_group=\" + this.$refs.subgroup.value + '&program_id=1';\n\n      if(this.regenerateReport == true){\n        this.regenerateReport = false;\n        url += '&regenerate=true';\n      }else{ \n        url += '&regenerate=false';\n      }\n\n      console.log(url)\n      const response = await ApiClient.get(url);\n\n      if (response.status === 200) {\n        this.loadData(await response.json(), this.$refs.subgroup.value);\n      }else{\n        //code\n      }\n    },loadData(data, age_group) {\n      this.dTable.fnClearTable();\n      for(let qtr in data) {\n        let row_id = (qtr.split(' ')[1]);\n        let outcome = data[qtr];\n        let set_quarter = qtr;\n        let qinterval = '';\n        let alive = 0;\n        let died = 0;\n        let defaulted = 0;\n        let stopped = 0;\n        let to = 0;\n        let unknown = 0;\n        let total_reg = 0;\n\n        for(let c in outcome) {\n          let interval = outcome[c]\n          for(let i in interval) {\n            qinterval = i\n            if(c == 'On antiretrovirals') {\n              alive = outcome[c][i];\n            }else if(c == 'Defaulted'){\n              defaulted = outcome[c][i];\n            }else if(c == 'Patient died'){\n              died = outcome[c][i];\n            }else if(c == 'Stopped'){\n              stopped = outcome[c][i];\n            }else if(c == 'Patient transferred out'){\n              to = outcome[c][i];\n            }else{\n              unknown = outcome[c][i]\n            }\n\n            total_reg += outcome[c][i];\n          }\n        }\n\n        if(total_reg > 0) {\n          let row = this.dTable.fnAddData([set_quarter, qinterval, age_group, total_reg,\n            '', alive, died, defaulted, stopped, to, unknown]);\n          //.node().id = row_id;\n          //this.dTable.draw();\n          //addClass(row_id);\n        }\n      }\n    },\n    addClass(id) {\n      var tr = document.getElementById(id);\n      var cells = tr.getElementsByTagName('td');\n      cells[5].setAttribute('class','count-separator');\n    },\n    initDataTable(){\n      this.dTable = jQuery(\"#example\").dataTable({\n        order: [[ 0, \"asc\" ]],\n        fixedHeader: true,\n        searching: false,\n        paging: false,\n        Processing: true,\n        ServerSide: true,\n        scroller: {\n          loadingIndicator: true\n        },\n        dom: 'Bfrtip',\n        buttons: [\n          {\n            extend: 'copy',\n            title:  this.reportTitle\n          },\n          {\n            extend: 'csv',\n            title:  this.reportTitle,\n            footer: true\n          },\n          {\n            extend: 'pdf',\n            title:  this.reportTitle\n          },\n          {\n            extend: 'print',\n            title:  this.reportTitle\n          }\n        ],\n        columnDefs: [\n          {\"className\": \"dt-center\", \"targets\": 4}\n        ]\n      });\n    }\n  },\n  data () {\n    return {\n      reportQtr: [],\n      regenerateReport: false,\n      reportData: null,\n      reportID: null,\n      reportLoading: false,\n      reportSelected: false,\n      APIVersion: sessionStorage.APIVersion,\n      EMCVersion: sessionStorage.EMCVersion,\n    }\n  },\n  computed: {\n    ...mapState(['location']),\n    reportTitle() {\n      return `MOH ${this.location.name} cohort report (Survival analysis) `;\n    }\n  },\n  mounted(){\n    setTimeout(() => this.initDataTable(), 300);\n  }\n}\n\n\n</Script>\n\n<style scoped>\n#example {\n  text-align: center;\n  margin-top: 20px;  \n  border-top-style: solid;\n  border-top-width: 1px;;\n}\n\n.disaggregated-numbers {\n  text-align: right;\n  padding-right: 10px;\n}\n\n#spinner {\n  position: absolute;\n  top: 15%;\n  left: 40%;\n}\n\n#report-cover {\n  position: absolute;\n  background-color: black;\n  width: 100%;\n  height: 102%;\n  left: 0%;\n  top: 0%;\n  z-index: 990;\n  opacity: 0.65;\n}\n\n.title-table {\n  display: table;\n  width: 100%;\n}\n\n.title-row {\n  display: table-row;\n}\n\n.title-cell {\n  display: table-cell;\n  height: 30px;\n  vertical-align: top;\n  border-style: solid;\n  border-width: 0px 0px 1px 0px;\n}\n\n\n#title-cell-left {\n  vertical-align: middle;\n  width: 100px;\n}\n\n#title-cell-left img {\n  height: 95px;\n  width: 95px;\n  margin: 5px;\n}\n\n#title-cell-right {\n  margin-left: 5px;\n}\n\n#data-cell {\n  display: table-cell;\n  width: 100%;\n}\n\n#report {\n  width: 100%;\n}\n\nth {\n  text-align: left;\n}\n</style>\n\n<style>\n.dt-center {\n  border-right-style: solid;\n  border-right-width: 5px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SurvivalAnalysis.vue?vue&type=template&id=1e64d341&scoped=true&\"\nimport script from \"./SurvivalAnalysis.vue?vue&type=script&lang=js&\"\nexport * from \"./SurvivalAnalysis.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SurvivalAnalysis.vue?vue&type=style&index=0&id=1e64d341&scoped=true&lang=css&\"\nimport style1 from \"./SurvivalAnalysis.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e64d341\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reportDatePicker.vue?vue&type=style&index=0&id=f39eba7c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reportDatePicker.vue?vue&type=style&index=0&id=f39eba7c&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=style&index=0&id=1e64d341&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SurvivalAnalysis.vue?vue&type=style&index=0&id=1e64d341&scoped=true&lang=css&\""],"sourceRoot":""}