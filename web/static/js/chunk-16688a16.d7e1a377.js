(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16688a16"],{"08a8":function(t,e,a){"use strict";var r=a("432a"),n=a.n(r);n.a},"22ae":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),t._m(0),a("div",{staticClass:"col-12 table-col",attrs:{id:"main-container"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("sdPicker",{staticStyle:{"z-index":"50"},attrs:{onSubmit:t.fetchDates}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("ReportOverlay",{attrs:{reportLoading:t.reportLoading}},[a("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),a("th",{staticStyle:{width:"20%"},attrs:{scope:"col"}},[t._v("Age group")]),a("th",{staticStyle:{width:"20%"},attrs:{scope:"col"}},[t._v("Gender")]),a("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("# of clients on <3 months of ARVs")]),a("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("# of clients on 3 - 5 months of ARVs")]),a("th",{staticClass:"center-text",attrs:{scope:"col"}},[t._v("# of clients on >= 6 months of ARVs")])])])])])],1)])])],1),a("div",{staticClass:"modal fade",attrs:{id:"myModal",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),a("h4",{staticClass:"modal-title"},[t._v(t._s(this.selectedGender)+" "+t._s(this.selectedAgeGroup))])]),t._m(1),t._m(2)])])])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alert alert-info"},[a("strong",[t._v("TX CURR MMD")]),t._v(" Clients that are alive and on treatment in the reporting period and the difference in days between their clinical dispensation visit and next appointment / drug-runout date is: "),a("ul",[a("li",[t._v("<3 months (1 – 89 days)")]),a("li",[t._v("3-5 months (90-179 days)")]),a("li",[t._v("6+ months (180 or more days)")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("table",{attrs:{id:"drill-down"}},[a("tr",[a("th",[t._v("ARV number")]),a("th",[t._v("Regimen")]),a("th",[t._v("Qty")]),a("th",[t._v("Dispensed date")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")])])}],s=(a("99af"),a("4160"),a("b0c0"),a("3835")),i=(a("96cf"),a("1da1")),o=a("5530"),c=a("8051"),l=a("ebd8"),d=a("7c08"),u=a("c1df"),h=a.n(u),p=a("4dfe"),f=a("8e71"),m=a("2f62"),v=a("1157"),b=a.n(v);a("6810");a("2cdf"),a("fd5e"),a("5caa"),a("c3dc"),a("4e95"),a("a8a1"),a("919c"),a("4b69"),a("7dae"),a("a821");var _={name:"reports",components:{ReportOverlay:f["a"],"top-nav":l["a"],"side-bar":d["a"],sdPicker:p["a"]},computed:Object(o["a"])(Object(o["a"])({},Object(m["c"])(["location"])),{},{reportTitle:function(){if(this.startDate&&this.endDate){var t=function(t){return h()(t).format("dddd, Do of MMM YYYY")};return"".concat(this.location.name," TX CURR MMD between ").concat(t(this.startDate)," and ").concat(t(this.endDate))}return"".concat(this.location.name," TX CURR MMD")}}),methods:{fetchDates:function(t){if(this.validateDateRange(t)){this.startDate=t[0],this.endDate=t[1],this.reportLoading=!0;var e=function(t){return h()(t).format("dddd, Do of MMM YYYY")};this.report_title="".concat(this.location.name," TX CURR MMD between ").concat(e(t[0])," and ").concat(e(t[1])),this.initReportingGroups(),this.fetchData()}},fetchData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,s,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.reportingGroups.length>0)){t.next=6;break}r=this.setMinMaxAges(this.reportingGroups[0]),e=r[0],a=r[1],t.next=9;break;case 6:return this.reportLoading=!1,this.$nextTick(this.renderTable),t.abrupt("return");case 9:return n="arv_refill_periods?start_date="+this.startDate+"&date="+h()().format("YYYY-MM-DD"),n+="&end_date="+this.endDate+"&program_id=1&org=pepfar",n+="&min_age="+e,n+="&max_age="+a,t.next=15,c["a"].get(n,{},{});case 15:s=t.sent,200===s.status&&(s.json().then((function(t){return i.addRow(t)})),setTimeout((function(){return i.fetchData()}),500));case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addLink:function(t,e,a,r){console.log(t+" --- "+e);var n=document.createElement("span"),s=document.createElement("a");return s.setAttribute("href","#"),s.setAttribute("age-group",t),s.setAttribute("gender",e),s.setAttribute("column_number",r),s.setAttribute("click","showPoPBox('"+t+"');"),s.innerHTML=a,n.appendChild(s),n.innerHTML},showPoPBox:function(t){console.log(t)},initDataTable:function(t){this.dTable=b()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,paging:!1,dom:"Bfrtip",destroy:!0,data:t,buttons:[{extend:"copy",title:this.reportTitle},{extend:"csv",title:this.reportTitle},{extend:"pdf",title:this.reportTitle},{extend:"print",title:this.reportTitle}],columnDefs:[{className:"center-text",targets:3},{className:"center-text",targets:4},{className:"center-text",targets:5}]})},initReportingGroups:function(){this.reportingGroups=["<1 year","1-4 years","5-9 years","10-14 years","15-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"],this.tableRows=[]},addRow:function(t){for(var e=["Female","Male"],a=this.reportingGroups,r=0;r<e.length;r++){var n=e[r];for(var s in void 0==this.column_3[n]?(this.column_3[n]={},this.column_3[n][a[0]]=0):void 0==this.column_3[n][a[0]]&&(this.column_3[n][a[0]]=0),void 0==this.column_4[n]?(this.column_4[n]={},this.column_4[n][a[0]]=0):void 0==this.column_4[n][a[0]]&&(this.column_4[n][a[0]]=0),void 0==this.column_5[n]?(this.column_5[n]={},this.column_5[n][a[0]]=0):void 0==this.column_5[n][a[0]]&&(this.column_5[n][a[0]]=0),t)if(s==e[r]){var i=t[n];for(var o in i){var c=t[n][o],l=c.prescribed_days;l<60&&(this.column_3[n][a[0]]+=1),l>=60&&l<=150&&(this.column_4[n][a[0]]+=1),l>150&&(this.column_5[n][a[0]]+=1)}}this.tableRows.push([a[0],n,this.column_3[n][a[0]],this.column_4[n][a[0]],this.column_5[n][a[0]]])}this.reportingGroups.shift()},setMinMaxAges:function(t){return"<1 year"==t?[0,0]:"1-4 years"==t?[1,4]:"5-9 years"==t?[5,9]:"10-14 years"==t?[10,14]:"15-19 years"==t?[15,19]:"20-24 years"==t?[20,24]:"25-29 years"==t?[25,29]:"30-34 years"==t?[30,34]:"35-39 years"==t?[35,39]:"40-44 years"==t?[40,44]:"45-49 years"==t?[45,49]:"50 plus years"==t?[50,1e4]:void 0},renderTable:function(){var t=this,e=b()("#cohort-clients").DataTable();e.clear();var a=["copy","csv","pdf","print"];a.forEach((function(){return e.button().remove()})),a.forEach((function(a,r){e.button().add(r,{extend:a,title:t.reportTitle})}));for(var r=["Female","Male"],n=1,s=this.tableRows,i=0;i<r.length;i++)for(var o=0;o<s.length;o++)r[i]==s[o][1]&&e.row.add([n++,s[o][0],s[o][1],s[o][2],s[o][3],s[o][4]]);e.draw()},validateDateRange:function(t){var e=Object(s["a"])(t,2),a=e[0],r=e[1];return a&&r&&"Invalid date"!==a&&"Invalid date"!==r?!h()(a).isAfter(r)||(this.$bvToast.toast("Start date can not be less than end date",{title:"Error",variant:"warning"}),!1):(this.$bvToast.toast("Please select a start date and an end date",{title:"Error",variant:"warning"}),!1)}},mounted:function(){var t=this;this.$nextTick((function(){t.initReportingGroups(),t.initDataTable()}))},data:function(){return{report_title:"TX CURR MMD ",reportData:null,dTable:null,startDate:null,endDate:null,rowCounter:1,column_3:{},column_4:{},column_5:{},tableRows:[],selectedAgeGroup:null,selectedGender:null,reportingGroups:[],reportLoading:!1}}},D=_,y=(a("08a8"),a("bb60"),a("2877")),g=Object(y["a"])(D,r,n,!1,null,"c8110c24",null);e["default"]=g.exports},"336a":function(t,e,a){"use strict";var r=a("df61"),n=a.n(r);n.a},3835:function(t,e,a){"use strict";function r(t){if(Array.isArray(t))return t}a.d(e,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function n(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],r=!0,n=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0)if(a.push(i.value),e&&a.length===e)break}catch(c){n=!0,s=c}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw s}}return a}}var s=a("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return r(t)||n(t,e)||Object(s["a"])(t,e)||i()}},"432a":function(t,e,a){},"4dfe":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctrs"},[a("div",{staticClass:"ctr-table"},[a("div",{staticClass:"ctr-row"},[a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("button",{staticClass:"btn btn-success",on:{click:t.submitDates}},[t._v("Submit")])])])])])},n=[],s=a("f0ca"),i=a.n(s),o=a("c1df"),c=a.n(o),l=(a("6f3c"),a("1789")),d={components:{DatePick:i.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:l["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=c()(this.startDate).format("YYYY-MM-DD"),this.endDate=c()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(t,e){return l["a"].parse(t,e)},formatDate:function(t,e){return l["a"].format(t,e)}},mounted:function(){var t=this;setTimeout((function(){return t.initDates()}),300)}},u=d,h=(a("336a"),a("2877")),p=Object(h["a"])(u,r,n,!1,null,"15deca72",null);e["a"]=p.exports},"8e71":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-overlay",{attrs:{show:t.hideReport,"no-center":!0,"spinner-type":"grow","spinner-variant":"primary"},scopedSlots:t._u([{key:"overlay",fn:function(){return[a("div",{staticStyle:{display:"block","min-height":"720px",width:"100%","padding-top":"20%"}},[t.reportSelected?t._e():a("h1",[t._v("No Report Selected")]),t.reportSelected?a("b-spinner",{attrs:{type:"grow",variant:"primary"}}):t._e()],1)]},proxy:!0}])},[t._t("default")],2)},n=[],s={name:"report-overlay",props:{reportLoading:{type:Boolean,required:!0},reportSelected:{type:Boolean,default:!0}},computed:{hideReport:function(){return this.reportLoading||!this.reportSelected}}},i=s,o=a("2877"),c=Object(o["a"])(i,r,n,!1,null,null,null);e["a"]=c.exports},bb60:function(t,e,a){"use strict";var r=a("c510"),n=a.n(r);n.a},c510:function(t,e,a){},df61:function(t,e,a){}}]);
//# sourceMappingURL=chunk-16688a16.d7e1a377.js.map