(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bc9cf64"],{"3fd1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[i("side-bar"),i("div",{attrs:{id:"page-content-wrapper"}},[i("top-nav"),i("div",{staticClass:"container-fluid"},[i("Registration",{staticStyle:{"margin-top":"10px"}})],1)],1)],1)])},s=[],a=i("ebd8"),o=i("7c08"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",staticStyle:{width:"100%",margin:"auto"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("form",{attrs:{id:"msform"}},[i("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"pDetails"}},[i("h5",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),i("clinic-registration",{ref:"clinicRegistration",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),i("input",{staticClass:"btn btn-primary clinical action-button",staticStyle:{position:"absolute",bottom:"17px",right:"45%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.registrationObject}}),i("div",{staticClass:"errorTxt",staticStyle:{"margin-top":"10px","text-align":"center","font-weight":"bold"}})],1),i("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template tab",attrs:{id:"gDetails"}},[t._m(0),i("staging",{ref:"staging",attrs:{patientId:t.PATIENT_ID},on:{addEncounter:t.addEncounter}}),i("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),i("input",{staticClass:"btn btn-primary staging action-button",staticStyle:{position:"absolute",bottom:"30px",right:"40%"},attrs:{type:"button",name:"next",value:"Next Step"},on:{click:t.stagingObject}}),i("div",{staticClass:"guardianError",staticStyle:{"margin-top":"10px",height:"1px","text-align":"center","font-weight":"bold"}})],1),i("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[t._m(1),Object.entries(t.registrationEncounter).length>0&&Object.entries(t.stagingEncounter).length>0?i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[i("label",{staticStyle:{"font-weight":"bold"}},[t._v("HIV Clinic Registration")]),i("table",{staticClass:"table table-striped"},[t._m(2),i("tbody",[i("tr",[i("td",[t._v("Year Last Taken ARVs")]),i("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]?"Unknown":t.registrationEncounter["encounter"]["obs"]["yearLastTakenARVs"]["value_datetime"]||"N/A"))])]),i("tr",[i("td",[t._v("Ever registered at a clinic")]),i("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["everRegisteredAtClinic"]["value_coded"]]||"N/A"))])]),i("tr",[i("td",[t._v("ART # at previous location")]),i("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["artNumberAtPreviousLocation"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("Confirmatory Test")]),i("td",[t._v(t._s(t.CONCEPTS[t.registrationEncounter["encounter"]["obs"]["confirmatoryTest"]["value_coded"]]||"N/A"))])]),i("tr",[i("td",[t._v("ART Start Location")]),i("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["ARTStartLocation"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("Date ART Started")]),i("td",[t._v(t._s(null==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]||"Invalid date"==t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["dateARTStarted"]["value_datetime"]))])]),i("tr",[i("td",[t._v("Test Location")]),i("td",[t._v(t._s(t.registrationEncounter["encounter"]["obs"]["testLocation"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("Date of Test")]),i("td",[t._v(t._s("Invalid date"==t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]?"N/A":t.registrationEncounter["encounter"]["obs"]["testDate"]["value_datetime"]))])])])])]),i("div",{staticClass:"col-md-6",staticStyle:{"text-align":"left"}},[i("label",{staticStyle:{"font-weight":"bold"}},[t._v("Staging")]),i("table",{staticClass:"table table-striped"},[t._m(3),i("tbody",[i("tr",[i("td",[t._v("Reason for Starting")]),i("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["reason"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("Stage")]),i("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["stage"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("CD4 Count Date")]),i("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountDate"]["value_datetime"]||"N/A"))])]),i("tr",[i("td",[t._v("CD4 Count")]),i("td",[t._v(t._s(Object.entries(t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]).length>0?t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_modifier"]+""+t.stagingEncounter["encounter"]["obs"]["cd4Count"]["value_numeric"]:"N/A"))])]),i("tr",[i("td",[t._v("CD4 Count Location")]),i("td",[t._v(t._s(t.stagingEncounter["encounter"]["obs"]["cd4CountLocation"]["value_text"]||"N/A"))])]),i("tr",[i("td",[t._v("Condition(s)")]),i("td",[i("ul",{staticStyle:{height:"150px",overflow:"hidden","overflow-y":"scroll","list-style-type":"decimal"}},t._l(t.conditionList,(function(e){return i("li",{key:e,staticClass:"condtions"},[t._v(t._s(e||"NA"))])})),0)])])])])])]):t._e(),i("input",{staticClass:"btn btn-primary previous action-button-previous",staticStyle:{position:"absolute",bottom:"30px",right:"50%"},attrs:{type:"button",name:"previous",value:"Previous"}}),i("button",{staticClass:"btn btn-primary",staticStyle:{position:"absolute",bottom:"30px",right:"43%"},attrs:{type:"button"},on:{click:t.createEncounters}},[t._v("save")])]),t._m(4),t._m(5)])])])])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Staging")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("h5",{staticStyle:{"font-weight":"bold",margin:"auto","margin-bottom":"10px"}},[t._v("Summary")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("Name")]),i("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("Name")]),i("th",{attrs:{scope:"col"}},[t._v("Value")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"content-tab tab-pane fade show active shadow-lg p-3 mb-5 bg-white rounded form-template"},[i("div",{staticClass:"form-card"},[i("h2",{staticClass:"fs-title text-center"},[t._v("Success !")]),i("br"),i("br"),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-3"},[i("img",{staticClass:"fit-image",attrs:{src:"https://img.icons8.com/color/96/000000/ok--v2.png"}})])]),i("br"),i("br"),i("div",{staticClass:"row justify-content-center"},[i("div",{staticClass:"col-7 text-center"},[i("h5",[t._v("Patient added")])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{attrs:{id:"progressbar"}},[i("li",{staticClass:"active",attrs:{id:"registration"}},[i("strong",[t._v("Clinical Registration")])]),i("li",{attrs:{id:"staging"}},[i("strong",[t._v("Staging")])]),i("li",{attrs:{id:"summary"}},[i("strong",[t._v("Summary")])])])}],l=(i("4de4"),i("7db0"),i("4160"),i("caad"),i("d81d"),i("b64b"),i("ac1f"),i("2532"),i("466d"),i("159b"),i("96cf"),i("1da1")),u=i("8740"),d=i("f91c"),g=i("8051"),v=i("cf40"),h=(i("c1df"),i("1157")),p=i.n(h),m={data:function(){return{encounters:{},PATIENT_ID:this.$route.params.id,NEW_REGISTER:this.$route.params.new,registrationEncounter:{},stagingEncounter:{},CONCEPTS:{1065:"Yes",1066:"No",1040:"Rapid Antibody Test",844:"DNA PCR",1118:"Not Done"},clinicRegistrationFormValidations:[],stagingFormValidations:[]}},computed:{conditionList:function(){var t=this,e=Object.keys(this.stagingEncounter["encounter"]["obs"]).filter((function(t){return t.match(/condition/)})),i=e.map((function(e){return t.stagingEncounter["encounter"]["obs"][e]}));return i.map((function(t){return t["value_text"]}))}},components:{"clinic-registration":u["a"],staging:d["a"]},methods:{addEncounter:function(t){var e=Object.keys(t)[0];this.encounters[e]=t[e]},saveEncounter:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var i,n,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=[],n={url:"observations"},Object.keys(e).includes("obs")?(Object.keys(e.obs).forEach((function(t){i.push(e.obs[t])})),n.observations=i):Object.keys(e).includes("drug_orders")&&(n.drug_orders=e.drug_orders,n.url="drug_orders"),t.next=5,v["a"].createEncounter(this.PATIENT_ID,e.encounter_id,e.encounter_datetime);case 5:if(s=t.sent,this.successfulOperation=!0,201!==s.status&&200!==s.status){t.next=16;break}return a=s.encounter_id,n.encounter_id=a,t.next=12,g["a"].post(n.url,n);case 12:o=t.sent,201===o.status||200===o.status?(this.success=!0,this.fail=!1,this.postResponse="Appointment has been set."):(this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set."),t.next=19;break;case 16:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),createEncounters:function(){var t=this;this.NEW_REGISTER&&"false"!=this.NEW_REGISTER||this.voidFirstVisitEncounters();var e=Object.keys(this.$refs);console.log(e),e.forEach((function(e){t.$refs[e].saveEncounter()}));var i=Object.keys(this.encounters);i.forEach((function(e){console.log(t.encounters[e]),t.saveEncounter(t.encounters[e])})),this.redirect("/patient/mastercard/".concat(this.PATIENT_ID))},redirect:function(t){this.$router.push(t)},getExpected:function(t){var e=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],i="";return Object.keys(t).filter((function(t){e.includes(t)&&(i=t)})),i},initileWizard:function(t){console.log(t);var e=this;p()(document).ready((function(){var i,n,s,a;console.log(t),console.log(t["agrees_to_follow"]);p()("#pDetails");var o="<label style='color:red'> All required fields (*) must be completed before proceeding. </label>";p()(".clinical").click((function(){console.log(e.registrationEncounter);var t=e.registrationEncounter;this.clinicRegistrationFormValidations=[],"Select Option"!=t["agrees_to_follow"]&&""!=t["agrees_to_follow"]?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1);var s=t["receieved_treatment"];console.log(s);var r=s["ever_received"];"Select Option"!=r||""!=r?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1);var c=function(){return null!=s["last_date_received"]&&""!=s["last_date_received"]&&"Select Option"!=s["ever_registered"]&&""!=s["ever_registered"]},l=t["art_registration"],u=function(){return"Select Option"!=l["location"]&&null!=l["start_date"]&&""!=l["start_date"]&&null!=l["arv_number"]&&""!=l["arv_number"]},d=t["encounter"]["obs"]["initialTbStatus"]["value_coded"];if("Yes"===r)if(c()){this.clinicRegistrationFormValidations.push(!0),"Yes"===s["ever_registered"]&&(u()?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1)),"Select Option"!=d&&""!=d?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1);var g=t["vitals"]["obs"],v=null!=g["weight"]["value_numeric"]&&""!=g["weight"]["value_numeric"],h=null!=g["height"]["value_numeric"]&&""!=g["height"]["value_numeric"];v&&h?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1)}else this.clinicRegistrationFormValidations.push(!1);var m=t["confirmatory_test"],_=m["test"],b=function(){return null!=m["test_date"]&&""!=m["test_date"]&&"Select Option"!=m["location"]&&""!=m["location"]};null!=_&&"Select Option"!=_?(this.clinicRegistrationFormValidations.push(!0),1040!=_&&844!=_||(b()?this.clinicRegistrationFormValidations.push(!0):this.clinicRegistrationFormValidations.push(!1))):this.clinicRegistrationFormValidations.push(!1),this.clinicRegistrationFormValidations.includes(!1)?p()(".errorTxt").html(o):(p()(".errorTxt").html(""),i=p()(this).parent(),n=p()(this).parent().next(),p()("#progressbar li").eq(p()(".content-tab").index(n)).addClass("active"),n.show(),i.animate({opacity:0},{step:function(t){a=1-t,i.css({display:"none",position:"relative"}),n.css({opacity:a})},duration:600}))})),p()(".staging").click((function(){this.stagingFormValidations=[],console.log(e.stagingEncounter["encounter"]["obs"]);var t=e.stagingEncounter["encounter"]["obs"];null!=t["stage"]["value_text"]&&""!=t["stage"]["value_text"]&&"Select Option"!=t["stage"]["value_text"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1),null!=t["reason"]["value_text"]&&""!=t["reason"]["value_text"]&&"Select Option"!=t["reason"]["value_text"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1);var s=e.stagingEncounter["cd4_available"];s&&(null!=t["cd4CountDate"]["value_datetime"]&&""!=t["cd4CountDate"]["value_datetime"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1),null!=t["cd4Count"]["value_numeric"]&&""!=t["cd4Count"]["value_numeric"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1),null!=t["cd4Count"]["value_modifier"]&&""!=t["cd4Count"]["value_modifier"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1),null!=t["cd4CountLocation"]["value_text"]&&""!=t["cd4CountLocation"]["value_text"]&&"Select Option"!=t["cd4CountLocation"]["value_text"]?this.stagingFormValidations.push(!0):this.stagingFormValidations.push(!1)),this.stagingFormValidations.includes(!1)?p()(".guardianError").html(o):(p()(".guardianError").html(""),i=p()(this).parent(),n=p()(this).parent().next(),p()("#progressbar li").eq(p()(".content-tab").index(n)).addClass("active"),n.show(),i.animate({opacity:0},{step:function(t){a=1-t,i.css({display:"none",position:"relative"}),n.css({opacity:a})},duration:600}))})),p()(".previous").click((function(){i=p()(this).parent(),s=p()(this).parent().prev(),p()("#progressbar li").eq(p()(".content-tab").index(i)).removeClass("active"),s.show(),i.animate({opacity:0},{step:function(t){a=1-t,i.css({display:"none",position:"relative"}),s.css({opacity:a})},duration:600})})),p()(".confirm").click((function(){console.log("confirm clicked"),i=p()(this).parent(),n=p()(this).parent().next(),p()("#progressbar li").eq(p()(".content-tab").index(n)).addClass("active"),n.show(),i.animate({opacity:0},{step:function(t){a=1-t,i.css({display:"none",position:"relative"}),n.css({opacity:a})},duration:600})})),p()(".radio-group .radio").click((function(){p()(this).parent().find(".radio").removeClass("selected"),p()(this).addClass("selected")})),p()(".submit").click((function(){return console.log("Patient Details submitted!!!"),!1}))}))},registrationObject:function(){this.registrationEncounter=this.$store.state.registration.registration,console.log(this.registrationEncounter),this.initileWizard(this.registrationEncounter)},stagingObject:function(){this.stagingEncounter=this.$store.state.staging.staging,this.initileWizard(this.registrationEncounter),console.log(this.stagingEncounter)},removeEncounter:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"",t.next=3,g["a"].remove("encounters/".concat(e));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),voidEncounters:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){t.removeEncounter(e).then((function(t){console.log(t)}))}))},voidFirstVisitEncounters:function(){var t=[];t.push(this.$store.state.initialRegistration["encounter_id"]),t.push(this.$store.state.initialVitals["encounter_id"]),t.push(this.$store.state.initialStaging["encounter_id"]),this.voidEncounters(t)}},mounted:function(){console.log(this.$route.params.id),this.initileWizard(this.$store.state.registration.registration),this.initileWizard(this.$store.state.staging.staging)}},_=m,b=(i("9b16"),i("2877")),f=Object(b["a"])(_,r,c,!1,null,"2c7fb788",null),E=f.exports,C={name:"home",components:{"top-nav":a["a"],"side-bar":o["a"],Registration:E}},y=C,x=Object(b["a"])(y,n,s,!1,null,null,null);e["default"]=x.exports},"7db0":function(t,e,i){"use strict";var n=i("23e7"),s=i("b727").find,a=i("44d2"),o=i("ae40"),r="find",c=!0,l=o(r);r in[]&&Array(1)[r]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},"9b16":function(t,e,i){"use strict";var n=i("c52a"),s=i.n(n);s.a},c52a:function(t,e,i){}}]);
//# sourceMappingURL=chunk-5bc9cf64.08cfd45d.js.map