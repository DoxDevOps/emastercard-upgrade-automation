(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d3b5608"],{"16bf":function(t,e,a){},"244c":function(t,e,a){"use strict";var n=a("fcd4"),i=a.n(n);i.a},"29bc":function(t,e,a){"use strict";var n=a("be43"),i=a.n(n);i.a},"498a":function(t,e,a){"use strict";var n=a("23e7"),i=a("58a8").trim,s=a("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),i=a("5899"),s="["+i+"]",r=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7833:function(t,e,a){"use strict";a("96cf");var n=a("1da1"),i=a("8051");e["a"]=function(){function t(){return e.apply(this,arguments)}function e(){return e=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].get("global_properties?property=site_prefix");case 2:return e=t.sent,404===e.status&&alert("Site prefix not set, set it in settings/ sit_prefix"),t.next=6,e.json();case 6:return a=t.sent,t.abrupt("return",a.site_prefix);case 8:case"end":return t.stop()}}),t)}))),e.apply(this,arguments)}return{getSitePrefix:t}}()},"7c67":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("patient-information")],1),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.show("encounter-modal")}}},[t._v("Add Visit")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.show("outcome-modal")}}},[t._v("Update Outcome")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.show("viral-load-modal")}}},[t._v("Viral Load")]),a("div",{staticClass:"row",staticStyle:{margin:"10px","margin-top":"5px"}},[a("visit-data")],1),a("b-modal",{attrs:{id:"encounter-modal",title:"encounter",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"text-align":"left"}},[a("label",{attrs:{for:""}},[t._v("Encounter Date")])]),a("div",{staticClass:"col"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),a("encounter",{attrs:{date:t.date}})],1),a("b-modal",{attrs:{id:"outcome-modal",title:"outcome",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("outcome")],1),a("b-modal",{attrs:{id:"viral-load-modal",title:"encounter",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("viral-load",{ref:"viral-load"})],1)],1)],1)],1)])},i=[],s=a("ebd8"),r=a("7c08"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid card",staticStyle:{"margin-top":"35px"}},[a("button",{staticClass:"btn btn-info",staticStyle:{"z-index":"1",position:"absolute",left:"47.5%",bottom:"99%","font-size":"13px"},on:{click:function(e){return t.redirect("/registration/"+t.patientID+"/false")}}},[t._v("Edit/Void")]),a("div",{staticClass:"container-fluid",staticStyle:{"margin-top":"8px"}},[a("table",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-md-6 information",attrs:{"data-toggle":"modal"},on:{click:function(e){return t.$bvModal.show("arv-number-modal")}}},[a("p",[t._v(t._s(t.arvNumber))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("patient-info-modal")}}},[t._m(1),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.name))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("patient-info-modal")}}},[t._m(2),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.age)+" ("+t._s(t.initialAge)+")")])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("patient-info-modal")}}},[t._m(3),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.sex))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(4),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.initialWeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(5),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.initialHeight))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(6),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.bmi))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(7),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.ti))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("patient-info-modal")}}},[t._m(8),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.landmark))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("patient-info-modal")}}},[t._m(9),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.phoneNumber))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row",on:{click:function(e){return t.$bvModal.show("guardian-info-modal")}}},[t._m(10),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.guardianFirstName+" "+t.guardianLastName+" ("+t.guardianRelation+") ("+t.guardianNumber+")"))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(11),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.dateOfHIVTest)+" "+t._s(t.placeOfHIVTest))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(12),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.followUp))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(13),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s("N/A"!==t.startDate?t.moment(t.startDate).format("DD-MM-YYYY"):t.startDate))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(14),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.startReason))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(15),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.EPTB))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(16),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.PTB))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(17),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.kaposisSarcoma))])])])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"row"},[t._m(18),a("div",{staticClass:"col-md-6 information"},[a("p",[t._v(t._s(t.tbLastTwoYears))])])])])])]),a("b-modal",{attrs:{id:"arv-number-modal",title:"Edit ARV number",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("label",{attrs:{for:"exampleFormControlSelect1"}},[t._v(t._s(t.arvNumber)+" ->")])]),a("div",{staticClass:"col"},[a("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:t.sitePrefix+"-ARV-"}},[a("b-input",{attrs:{id:"inline-form-input-username",type:"number"},model:{value:t.arv_num,callback:function(e){t.arv_num=e},expression:"arv_num"}})],1)],1),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:t.saveARVNumber}},[t._v("Submit")])])])]),a("b-modal",{attrs:{id:"patient-info-modal",title:"patient detials",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",[a("b-form",[a("label",{attrs:{for:"text-name"}},[t._v("First Name")]),a("b-input",{attrs:{type:"text",id:"text-name"},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),a("label",{attrs:{for:"text-last-name"}},[t._v("Last Name")]),a("b-input",{attrs:{type:"text",id:"text-last-name"},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),a("label",{attrs:{for:"text-phone-number"}},[t._v("Phone Number")]),a("b-input",{attrs:{type:"text",id:"text-phone-number"},model:{value:t.updatedPhoneNumber,callback:function(e){t.updatedPhoneNumber=e},expression:"updatedPhoneNumber"}}),a("label",{attrs:{for:"text-address"}},[t._v("Physical Address")]),a("b-input",{attrs:{type:"text",id:"text-address"},model:{value:t.updatedAddress,callback:function(e){t.updatedAddress=e},expression:"updatedAddress"}}),a("label",{attrs:{for:"input-sex"}},[t._v("Sex")]),a("b-form-select",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-custom-select-pref",options:[{text:"Male",value:"M"},{text:"Female",value:"F"}]},model:{value:t.updatedSex,callback:function(e){t.updatedSex=e},expression:"updatedSex"}}),a("label",{attrs:{for:"example-datepicker"}},[t._v("Date of birth")]),a("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"example-datepicker"},model:{value:t.updatedDOB,callback:function(e){t.updatedDOB=e},expression:"updatedDOB"}}),a("div",{staticClass:"row justify-content-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:t.updateDetails}},[t._v("Save")])],1)],1)],1)]),a("b-modal",{attrs:{id:"guardian-info-modal",title:"guardian detials",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"w-100"})]},proxy:!0}])},[a("div",[a("b-form",[a("label",{attrs:{for:"text-name"}},[t._v("First Name")]),a("b-input",{attrs:{type:"text",id:"text-name"},model:{value:t.updatedguardianFirstName,callback:function(e){t.updatedguardianFirstName=e},expression:"updatedguardianFirstName"}}),a("label",{attrs:{for:"text-last-name"}},[t._v("Last Name")]),a("b-input",{attrs:{type:"text",id:"text-last-name"},model:{value:t.updatedguardianLastName,callback:function(e){t.updatedguardianLastName=e},expression:"updatedguardianLastName"}}),a("label",{attrs:{for:"text-phone-number"}},[t._v("Phone Number")]),a("b-input",{attrs:{type:"text",id:"text-phone-number"},model:{value:t.updatedguardianNumber,callback:function(e){t.updatedguardianNumber=e},expression:"updatedguardianNumber"}}),a("div",{staticClass:"row justify-content-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:t.updateGuardianDetails}},[t._v("Save")])],1)],1)],1)])],1)},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("ARV #")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Name")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("DOB and Age at initiation")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Sex")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Initial Weight")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Initial Height")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("BMI")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("TI")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Physical Address")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Phone Number")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Name of Guardian")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Date and Place of HIV Test")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Agrees to follow up")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Date of starting first line ARV Regimen")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Reason for Starting ART")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Extra Pulmonary Tuberculosis")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Pulmonary Tuberculosis")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Kaposi's Sarcoma")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-6"},[a("p",[t._v("Tuberculosis withing the last 2 year")])])}],u=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("b64b"),a("159b"),a("ade3")),l=(a("96cf"),a("1da1")),d=a("8051"),p=a("24ca"),m=a("7833"),v=a("c1df"),h=a.n(v),f=Object(u["a"])({data:function(){return{arvNumber:null,arv_num:null,name:null,firstName:null,lastName:null,age:null,sex:null,updatedDOB:null,updatedSex:null,dob:null,initialWeight:null,initialHeight:null,updatedAddress:null,bmi:null,ti:null,location:null,landmark:null,occupation:null,nameOfGuardian:null,dateOfHIVTest:null,placeOfHIVTest:null,followUp:null,startDate:null,startReason:null,EPTB:null,PTB:null,kaposisSarcoma:null,tbLastTwoYears:null,patientID:null,sitePrefix:null,showARVNumber:!1,phoneNumber:null,updatedPhoneNumber:null,guardianID:null,guardianFirstName:null,guardianLastName:null,guardianRelation:null,guardianNumber:null,updatedguardianFirstName:null,updatedguardianLastName:null,updatedguardianRelation:null,updatedguardianNumber:null,obs:[{conceptID:2552},{conceptID:5089,variableName:"initialWeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"initialHeight",valueType:"value_numeric",secondType:"value_text"},{conceptID:2137,variableName:"bmi",valueType:"value_numeric",secondType:"value_text"},{conceptID:7881,variableName:"placeOfHIVTest",valueType:"value_text"},{conceptID:7882,variableName:"dateOfHIVTest",valueType:"value_datetime",secondType:"value_text"},{conceptID:7754,variableName:"ti",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:7751,variableName:"ti",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}},{conceptID:2552,variableName:"followUp",valueType:"value_coded",secondType:"value_text",returnValue:"Yes",default:"No",params:"value_coded=1065",backupConcept:{conceptID:9685,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No",backupConcept:{conceptID:9686,variableName:"followUp",valueType:"value_datetime",secondType:"value_text",returnValue:"Yes",default:"No"}}},{conceptID:2516,variableName:"startDate",valueType:"value_datetime",secondType:"value_text",format:!1},{conceptID:7563,variableName:"startReason",valueType:"value_coded",secondType:"value_text"},{conceptID:2743,subConcepts:{507:{variableName:"kaposisSarcoma",returnValue:"Yes"},1547:{variableName:"EPTB",returnValue:"Yes"},7539:{variableName:"tbLastTwoYears",returnValue:"Yes"},8206:{variableName:"PTB",returnValue:"Yes"}}}]}},computed:{},methods:{getPatient:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/patients/".concat(this.patientID));case 2:return e=t.sent,t.next=5,e.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGuardian:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/people/".concat(this.patientID,"/relationships")).then((function(t){t.json().then((function(t){if(t.length>0){e.guardianID=t[0].person_b;var a=t[0]["relation"]["names"][0],n=t[0]["type"]["b_is_to_a"];e.guardianFirstName=a["given_name"],e.guardianLastName=a["family_name"],e.guardianRelation=n,e.updatedguardianFirstName=a["given_name"],e.updatedguardianLastName=a["family_name"],e.updatedguardianRelation=n,e.guardianNumber=e.getAtribute(t[0].relation.person_attributes,12),e.updatedguardianNumber=e.getAtribute(t[0].relation.person_attributes,12),e.nameOfGuardian=a["given_name"]+" "+a["family_name"]+" ("+n+")"}}))}));case 2:t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getObs:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="/observations?person_id=".concat(this.patientID,"&&concept_id=").concat(e.conceptID),a=e.params?a+"&&"+e.params:a,t.next=4,d["a"].get(a);case 4:return n=t.sent,t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getConcept:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/concepts/".concat(a)).then((function(t){t.json().then((function(t){n[e.variableName]=t.concept_names[0].name}))}));case 2:case"end":return t.stop()}}),t)})));function e(e,a,n){return t.apply(this,arguments)}return e}(),createOb:function(t,e){var a=this;this.getObs(t).then((function(n){if(n.length>0){if(t.returnValue)e[t.variableName]=t.returnValue;else if(t.subConcepts)n.forEach((function(a){try{e[t.subConcepts[a.value_coded].variableName]=t.subConcepts[a.value_coded].returnValue}catch(n){}}));else{var i=n[n.length-1][t.valueType]?n[n.length-1][t.valueType]:n[n.length-1][t.secondType];if(e[t.variableName]="value_datetime"===t.valueType&&!1!==t.format?h()(i).format("DD-MMM-YYYY"):i,"value_coded"===t.valueType&&a.getConcept(t,i,e),5089===t.conceptID){var s=n[0][t.valueType]?n[0][t.valueType]:n[0][t.secondType];p["a"].$emit("set-initial-weight",s),a.$store.commit("setWeight",s)}if(5090===t.conceptID){var r=n[0][t.valueType]?n[0][t.valueType]:n[0][t.secondType];p["a"].$emit("set-previous-height",r),a.$store.commit("setHeight",r)}}2552===t.conceptID&&a.$store.commit("setInitialRegistration",n[n.length-1]),5089===t.conceptID&&a.$store.commit("setInitialVitals",n[n.length-1]),7563===t.conceptID&&a.$store.commit("setInitialStaging",n[n.length-1])}else t.backupConcept&&a.createOb(t.backupConcept,e),t.default?e[t.variableName]=t.default:e[t.variableName]="N/A"}))},obsService:function(t){switch(key){case value:break;default:break}},getAtribute:function(t,e){var a=t.filter((function(t){return t.person_attribute_type_id==e}));return a.length>0?a[0].value:""},getPrefix:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].getSitePrefix();case 2:this.sitePrefix=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveARVNumber:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(this.sitePrefix,"-ARV-").concat(this.arv_num),a={identifier:e,identifier_type:4,patient_id:this.$route.params.id},t.next=4,d["a"].post("/patient_identifiers/",a);case 4:n=t.sent,201===n.status||200===n.status?(this.showMessage("ARV number updated"),this.arvNumber=e,this.$root.$emit("bv::hide::modal","arv-number-modal","#btnShow")):400===n.status&&this.showMessage("ARV number already in use");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showMessage:function(t){this.$toasted.show(t,{theme:"toasted-primary",position:"top-right",duration:5e3})},updateDetails:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},"".concat(this.firstName," ").concat(this.lastName)!==this.name&&(e.given_name=this.firstName,e.family_name=this.lastName),this.updatedDOB!==this.dob&&(e.birthdate=this.updatedDOB,e.birthdate_estimated=0),this.updatedSex!==this.sex&&(e.gender=this.updatedSex),this.updatedPhoneNumber!==this.phoneNumber&&(e.cell_phone_number=this.updatedPhoneNumber),this.updatedAddress!==this.landmark&&(e.landmark=this.updatedAddress),!(Object.keys(e).length>0)){t.next=13;break}return t.next=9,d["a"].put("/people/".concat(this.$route.params.id),e);case 9:a=t.sent,201===a.status||200===a.status?(this.showMessage("Successfully saved"),"".concat(this.firstName," ").concat(this.lastName)!==this.name&&(this.name="".concat(this.firstName," ").concat(this.lastName)),this.updatedDOB!==this.dob&&(this.dob=this.updatedDOB,this.age=" ".concat(h()(this.dob).format("DD-MMM-YYYY"))),this.updatedSex!==this.sex&&(this.sex=this.updatedSex),this.updatedPhoneNumber!==this.phoneNumber&&(this.phoneNumber=this.updatedPhoneNumber),this.updatedAddress!==this.landmark&&(this.landmark=this.updatedAddress),this.$root.$emit("bv::hide::modal","patient-info-modal","#btnShow")):console.log("Failed to update"),t.next=14;break;case 13:this.$root.$emit("bv::hide::modal","patient-info-modal","#btnShow");case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateGuardianDetails:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={},this.guardianFirstName!==this.updatedguardianFirstName&&(e.given_name=this.updatedguardianFirstName),this.guardianLastName!==this.updatedguardianLastName&&(e.family_name=this.updatedguardianLastName),this.updatedguardianNumber!==this.guardianNumber&&(e.cell_phone_number=this.updatedguardianNumber),!(Object.keys(e).length>0)){t.next=11;break}return t.next=7,d["a"].put("/people/".concat(this.guardianID),e);case 7:a=t.sent,201===a.status||200===a.status?(this.showMessage("Successfully saved"),this.guardianFirstName!==this.updatedguardianFirstName&&(this.guardianFirstName=this.updatedguardianFirstName),this.guardianLastName!==this.updatedguardianLastName&&(this.guardianLastName=this.updatedguardianLastName),this.updatedguardianNumber!==this.guardianNumber&&(this.guardianNumber=this.updatedguardianNumber),this.$root.$emit("bv::hide::modal","guardian-info-modal","#btnShow")):console.log("Failed to update"),t.next=12;break;case 11:this.$root.$emit("bv::hide::modal","guardian-info-modal","#btnShow");case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),redirect:function(t){this.$router.push(t)}},mounted:function(){var t=this;this.getPrefix(),this.patientID=this.$route.params.id,this.getPatient().then((function(e){t.name="".concat(e["person"].names[0].given_name," ").concat(e.person.names[0].family_name),t.firstName=e["person"].names[0].given_name,t.lastName=e["person"].names[0].family_name,t.dob=e.person.birthdate,t.updatedDOB=e.person.birthdate,t.age=" ".concat(h()(e.person.birthdate).format("DD-MMM-YYYY"));var a=e.patient_identifiers.filter((function(t){return"ARV Number"===t.type.name}));t.arvNumber=a.length>0?a[0].identifier:"N/A",t.sex=e.person.gender,t.updatedSex=e.person.gender,t.location=e.person.addresses.length>0?e.person.addresses[0].city_village:"",t.landmark=t.getAtribute(e.person.person_attributes,19),t.updatedAddress=t.getAtribute(e.person.person_attributes,19),t.occupation=t.getAtribute(e.person.person_attributes,13),t.phoneNumber=t.getAtribute(e.person.person_attributes,12),t.updatedPhoneNumber=t.getAtribute(e.person.person_attributes,12);var n={name:t.name,dob:e.person.birthdate,age:h()().diff(e.person.birthdate,"years",!1),arvNumber:t.arvNumber,sex:t.sex};t.$store.commit("setPatient",n)})),this.obs.forEach((function(e){t.createOb(e,t)})),this.getGuardian()}},"computed",{initialAge:function(){var t="N/A";return"N/A"!==this.startDate&&(t=h()(this.startDate).diff(this.dob,"years",!1)),t}}),_=f,g=(a("e38a"),a("2877")),b=Object(g["a"])(_,o,c,!1,null,"18c2d2ff",null),y=b.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-dark"},[t._m(0),a("tbody",t._l(t.patientVisits,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(t.moment(e.visitDate).format("DD-MMM-YYYY")))]),a("td",[t._v(t._s(e.givenTo))]),a("td",[t._v(t._s(e.weight))]),a("td",[t._v(t._s(e.height))]),a("td",[t._v(t._s(e.pregnant))]),a("td",[t._v(t._s(e.breastfeeding))]),a("td",[t._v(t._s(e.tbStatus))]),a("td",[t._v(t._s(e.sideEffects))]),a("td",[t._v(t._s(e.ARTRegimen))]),a("td",[t._v(t._s(e.nextAppointment))]),a("td",[t._v(t._s(e.outcome))]),a("td",[t._v(t._s(e.viralLoad))]),a("td",[e.encounters.length>0?a("click-confirm",[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.deleteVisit(n,e.encounters)}}},["deleting"===e.state?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]:[a("span",[t._v("X")])]],2)]):t._e()],1)])})),0)])},x=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Visit Date")]),a("th",[t._v("Given To")]),a("th",[t._v("Weight")]),a("th",[t._v("Height")]),a("th",[t._v("Preg")]),a("th",[t._v("B/F")]),a("th",[t._v("TB status")]),a("th",[t._v("Side Effects")]),a("th",[t._v("ART Regimen")]),a("th",[t._v("Next Appointment")]),a("th",[t._v("Outcome")]),a("th",[t._v("Viral Load")])])])}];a("a4d3"),a("a434"),a("e439"),a("dbb4");function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(u["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var E={data:function(){return{patientVisits:[],mockOBJ:{visitDate:null,givenTo:null,weight:null,height:null,sideEffects:null,ARTRegimen:null,nextAppointment:null,viralLoad:null,outcoume:null,encounters:[],state:null,tbStatus:null,pregnant:null,breastfeeding:null},encountersToDelete:[],obs:[{conceptID:5089,variableName:"weight",valueType:"value_numeric",secondType:"value_text"},{conceptID:5090,variableName:"height",valueType:"value_numeric",secondType:"value_text"},{conceptID:5096,variableName:"nextAppointment",valueType:"value_datetime",secondType:"value_text"},{conceptID:7459,variableName:"tbStatus",valueType:"value_coded",secondType:"value_text",conceptNames:{7454:"TB NOT suspected",7455:"TB suspected",7456:"Confirmed TB NOT on treatment",7458:"Confirmed TB on treatment"}},{conceptID:856,variableName:"viralLoad",valueType:"value_numeric",secondType:"value_text",prepend:"value_text"}]}},methods:{getVisits:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/patients/".concat(this.$route.params.id,"/visits")).then((function(t){t.json().then((function(t){e.setVisits(t)}))}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteVisit:function(t,e){var a=this,n=e.length;this.patientVisits[t].state="deleting",e.forEach((function(e){a.removeEncounter(e).then((function(e){204==e.status?(n-=1,0===n&&a.patientVisits.splice(t,1)):console.log("not deleted")}))}))},removeEncounter:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].remove("encounters/"+e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),setVisits:function(t){var e=this,a=[];t.forEach((function(t){a.push({visitDate:t,encounters:e})})),this.createOb(a)},getObs:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/observations?person_id=".concat(this.$route.params.id,"&&concept_id=").concat(e.conceptID,"&&obs_datetime=").concat(a.visitDate),n=e.params?n+"&&"+e.params:n,t.next=4,d["a"].get(n);case 4:return i=t.sent,t.next=7,i.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getEncounters:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="/encounters?patient_id=".concat(this.$route.params.id,"&&date=").concat(e),t.next=3,d["a"].get(a);case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCurrentPatientInfo:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="programs/1/patients/".concat(this.$route.params.id,"?date=").concat(e.visitDate),t.next=3,d["a"].get(a);case 3:return n=t.sent,t.next=6,n.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getNextAppointMent:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="programs/1/patients/".concat(this.$route.params.id,"/next_appointment_date"),t.next=3,d["a"].get(e);case 3:return a=t.sent,t.next=6,a.json();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getConcept:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/concepts/".concat(e));case 2:return a=t.sent,t.next=5,a.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),createOb:function(t){var e=this;t.forEach((function(t){var a=k({},e.mockOBJ);a.visitDate=t.visitDate,e.obs.forEach((function(n){e.getObs(n,t).then((function(i){if(i.length>0)if(n.returnValue)t.variableName=n.returnValue;else if(n.subConcepts)i.forEach((function(e){try{t.subConcepts[e.value_coded].variableName=t.subConcepts[e.value_coded].returnValue}catch(a){}}));else{var s=i[i.length-1][n.valueType]?i[i.length-1][n.valueType]:i[i.length-1][n.secondType];a[n.variableName]="value_datetime"===n.valueType?h()(s).format("DD-MMM-YYYY"):s,"value_coded"===n.valueType&&(n.conceptNames?a[n.variableName]=n.conceptNames[s]:e.getConcept(s).then((function(t){a[n.variableName]=t.concept_names[0].name}))),n.prepend&&(a[n.variableName]=i[i.length-1][n.prepend]+" "+s)}else n.backupConcept,n.default?t.variableName=n.default:t[n.variableName]="N/A"}))})),e.getCurrentPatientInfo(t).then((function(e){t.ARTRegimen=e.current_regimen,t.outcome=e.current_outcome,a.ARTRegimen=e.current_regimen,a.outcome=e.current_outcome})),e.getObs({conceptID:7755},t).then((function(e){var n=e.filter((function(t,a){return 1065==e[a].children[0].value_coded})).length;n=0===n?"No":"Yes",t.sideEffects=n,a.sideEffects=n})),e.getObs({conceptID:1805,params:"value_coded=1065"},t).then((function(e){e.length>0?(t.givenTo="Patient",a.givenTo="Patient"):(t.givenTo="Guardian",a.givenTo="Guardian")})),e.getObs({conceptID:6131,params:"value_coded=1065"},t).then((function(e){e.length>0?(t.pregnant="Yes",a.pregnant="Yes"):(t.pregnant="",a.pregnant="")})),e.getObs({conceptID:7965,params:"value_coded=1065"},t).then((function(e){e.length>0?(t.breastfeeding="Yes",a.breastfeeding="Yes"):(a.breastfeeding="",t.breastfeeding="")})),e.getEncounters(t.visitDate).then((function(t){var e=[];t.forEach((function(t){e.push(t.encounter_id)})),a.encounters=[].concat(e)})),e.patientVisits.push(a)}))},returnConcept:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.getVisits(),p["a"].$on("reload-visits",(function(e){t.patientVisits=[],t.encountersToDelete=[],t.getVisits()}))}},N=E,O=(a("e6ad"),Object(g["a"])(N,C,x,!1,null,"b1b52c8c",null)),T=O.exports,D=a("8740"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vitals",{ref:"vitals",on:{addEncounter:t.addEncounter}}),a("consultation",{ref:"consultation",on:{addEncounter:t.addEncounter}}),a("prescription",{ref:"prescription",attrs:{date:t.date},on:{addEncounter:t.addEncounter}}),a("reception",{ref:"reception",on:{addEncounter:t.addEncounter}}),a("adherence",{ref:"adherence",attrs:{date:t.date},on:{addEncounter:t.addEncounter}}),a("appointment",{ref:"appointment",on:{addEncounter:t.addEncounter}}),a("button",{staticClass:"btn btn-primary",on:{click:t.createEncounters}},[!0===t.posting?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]:[a("span",[t._v("Save")])]],2)],1)},$=[],P=(a("caad"),a("2532"),a("53ba")),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row "},[t._m(0),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"patient",disabled:t.hasWeight},domProps:{checked:t._q(t.patient.value_coded,"1065")},on:{change:function(e){return t.$set(t.patient,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.patient.value_coded,expression:"patient.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"patient",disabled:t.hasWeight},domProps:{checked:t._q(t.patient.value_coded,"1066")},on:{change:function(e){return t.$set(t.patient,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("No")])])])]),t._m(1),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065",name:"guardian",disabled:t.hasWeight},domProps:{checked:t._q(t.guardian.value_coded,"1065")},on:{change:function(e){return t.$set(t.guardian,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.guardian.value_coded,expression:"guardian.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066",name:"guardian",disabled:t.hasWeight},domProps:{checked:t._q(t.guardian.value_coded,"1066")},on:{change:function(e){return t.$set(t.guardian,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("No")])])])])])])},j=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[t._v("Drugs given to patient")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[t._v("Drugs given to guardian")])])}],A={data:function(){return{patient:{value_coded:null,concept_id:1805},guardian:{value_coded:null,concept_id:2122},hasWeight:!1}},methods:{saveEncounter:function(){var t={reception:{encounter_id:51,obs:{patient:this.patient,guardian:this.guardian}}};this.$emit("addEncounter",t)},setPresent:function(){"1066"===this.patient.value_coded?this.guardian.value_coded="1065":"1065"===this.patient.value_coded?this.guardian.value_coded="1066":"1066"===this.guardian.value_coded?this.patient.value_coded="1065":"1065"===this.guardian.value_coded&&(this.patient.value_coded="1066"),p["a"].$emit("set-present",this.patient.value_coded)}},watch:{patient:{handler:function(t){this.setPresent()},deep:!0},guardian:{handler:function(t){this.setPresent()},deep:!0}},mounted:function(){var t=this;p["a"].$on("set-weight",(function(e){null!==e&&""!==e&&0!==e?(t.patient.value_coded="1065",t.guardian.value_coded="1066",t.hasWeight=!0):(t.patient.value_coded=null,t.guardian.value_coded=null,t.hasWeight=!1)}))}},I=A,Y=Object(g["a"])(I,R,j,!1,null,null,null),V=Y.exports,M=a("f91c"),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group mb-3"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date.value_datetime,expression:"date.value_datetime"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:t.date.value_datetime},on:{input:function(e){e.target.composing||t.$set(t.date,"value_datetime",e.target.value)}}})])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"height"}},[t._v("Appointment Date")])])}],L={data:function(){return{date:{value_datetime:null,concept_id:5096}}},methods:{saveEncounter:function(){var t={hiv_staging:{encounter_id:7,obs:{date:this.date}}};this.$emit("addEncounter",t)}}},B=L,W=Object(g["a"])(B,F,q,!1,null,null,null),H=W.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t.isFemale?a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col"},[a("fieldset",[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pregnant.value_coded,expression:"pregnant.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065"},domProps:{checked:t._q(t.pregnant.value_coded,"1065")},on:{change:function(e){return t.$set(t.pregnant,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pregnant.value_coded,expression:"pregnant.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066"},domProps:{checked:t._q(t.pregnant.value_coded,"1066")},on:{change:function(e){return t.$set(t.pregnant,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("No")])])])]),t._m(1),a("div",{staticClass:"col"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.breastFeeding.value_coded,expression:"breastFeeding.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1065"},domProps:{checked:t._q(t.breastFeeding.value_coded,"1065")},on:{change:function(e){return t.$set(t.breastFeeding,"value_coded","1065")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio1"}},[t._v("Yes")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.breastFeeding.value_coded,expression:"breastFeeding.value_coded"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1066"},domProps:{checked:t._q(t.breastFeeding.value_coded,"1066")},on:{change:function(e){return t.$set(t.breastFeeding,"value_coded","1066")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"inlineRadio2"}},[t._v("No")])])])]):t._e(),a("div",{staticClass:"row"}),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[t._m(2),a("div",{staticClass:"col"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentStatus,expression:"currentStatus"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentStatus=e.target.multiple?a:a[0]}}},t._l(Object.keys(t.tb_status),(function(e,n){return a("option",{key:n,domProps:{value:t.tb_status[e]}},[t._v(" "+t._s(e)+" ")])})),0)]),t._m(3),a("div",{staticClass:"col"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.hasSE,expression:"hasSE"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inlineCheckbox1",value:"true"},domProps:{checked:Array.isArray(t.hasSE)?t._i(t.hasSE,"true")>-1:t.hasSE},on:{change:function(e){var a=t.hasSE,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s="true",r=t._i(a,s);n.checked?r<0&&(t.hasSE=a.concat([s])):r>-1&&(t.hasSE=a.slice(0,r).concat(a.slice(r+1)))}else t.hasSE=i}}})]),a("div",{staticClass:"form-check form-check-inline"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hasSE,expression:"hasSE"}],staticClass:"row"},[t._l(Object.keys(t.sideEffects),(function(e,n){return a("div",{key:n,staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sides,expression:"sides"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:t.sideEffects[e],checked:Array.isArray(t.sides)?t._i(t.sides,t.sideEffects[e])>-1:t.sides},on:{change:function(a){var n=t.sides,i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=t.sideEffects[e],o=t._i(n,r);i.checked?o<0&&(t.sides=n.concat([r])):o>-1&&(t.sides=n.slice(0,o).concat(n.slice(o+1)))}else t.sides=s}}}),t._v(" "+t._s(e)+" ")])])])})),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.otherSE,expression:"otherSE"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.otherSE)?t._i(t.otherSE,"true")>-1:t.otherSE},on:{change:function(e){var a=t.otherSE,n=e.target,i=!!n.checked;if(Array.isArray(a)){var s="true",r=t._i(a,s);n.checked?r<0&&(t.otherSE=a.concat([s])):r>-1&&(t.otherSE=a.slice(0,r).concat(a.slice(r+1)))}else t.otherSE=i}}}),t._v(" Other ")])])])],2)]),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:t.otherSE,expression:"otherSE"}],staticClass:"container-fluid"},[a("p",[t._v("Other Side Effects / Contraindications")]),a("div",{staticClass:"row"},t._l(Object.keys(t.otherSideEffects),(function(e,n){return a("div",{key:n,staticClass:"col-md-4"},[a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.otherSides,expression:"otherSides"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{value:t.otherSideEffects[e],checked:Array.isArray(t.otherSides)?t._i(t.otherSides,t.otherSideEffects[e])>-1:t.otherSides},on:{change:function(a){var n=t.otherSides,i=a.target,s=!!i.checked;if(Array.isArray(n)){var r=t.otherSideEffects[e],o=t._i(n,r);i.checked?o<0&&(t.otherSides=n.concat([r])):o>-1&&(t.otherSides=n.slice(0,o).concat(n.slice(o+1)))}else t.otherSides=s}}}),t._v(" "+t._s(e)+" ")])])])})),0)]),a("br")])])},G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[t._v("Pregnant")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[t._v("Breastfeeding")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("p",[t._v("TB Status")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col d-flex justify-content-start"},[a("label",{staticClass:"form-check-label",attrs:{for:"inlineCheckbox1"}},[t._v("Has Side Effects / Contraindications?")])])}],U={data:function(){return{gender:null,pregnant:{value_coded:null,concept_id:6131},breastFeeding:{value_coded:null,concept_id:7965},onTb:{value_coded:null,concept_id:2690},currentStatus:null,fpm:{"Oral contraceptive pills":780,"Depo-Provera":907,"Intrauterine device/loop":5275,Implant:7857,"Male condoms":7858,"Female condoms":7859,"Tubal ligation":1719,"None of the above":1107},tb_status:{"TB NOT suspected":7454,"TB suspected":7455,"Confirmed TB NOT on treatment":7456,"Confirmed TB on treatment":7458},drugs:{ARVs:1085,CPT:916,IPT:656},tbSymptoms:{"cough of any duration":8261,fever:5945,"night sweats":6029,"Weight loss / Failure to thrive / malnutritionweight loss":8260},sideEffects:{"peripheral neuropathy":821,jaundice:215,lipodystrophy:2148,"kidney failure":9242,psychosis:219,gynaecomastia:9440,anemia:3,"skin rash":512,insomnia:867},otherSideEffects:{fever:5945,vomiting:5980,dizziness:877,headache:620,nausea:5978,"weight loss":8260,"lactic acidosis":1458,cough:107},prescribedFPM:[],currentFPM:[],sides:[],otherSides:[],tbSymps:[],drugsToPrescribe:[],onFP:!1,prescribeFP:!1,hasSE:!1,otherSE:!1,hasTBSymps:!1,statusTB:null}},computed:{isFemale:function(){return"F"===this.$store.state.patient.sex}},methods:{saveEncounter:function(){var t=this,e={consultation:{encounter_id:53,obs:{tb:{value_coded:this.currentStatus,concept_id:7459}}}};this.isFemale&&(e.consultation.obs.pregnant=this.pregnant,e.consultation.obs.breastFeeding=this.breastFeeding,e.consultation.obs.onFP={concept_id:1717,value_coded:1066},Object.keys(this.fpm).forEach((function(a){e.consultation.obs["pres"+a]={concept_id:t.fpm[a],value_coded:t.getCoded(t.prescribedFPM,t.fpm[a])}})),Object.keys(this.fpm).forEach((function(a){e.consultation.obs["curr"+a]={concept_id:t.fpm[a],value_coded:t.getCoded(t.currentFPM,t.fpm[a])}})),this.onFP&&(e.consultation.obs.onFP.value_coded=1065)),Object.keys(this.sideEffects).forEach((function(a){e.consultation.obs[a]={concept_id:7755,value_coded:t.sideEffects[a],child:{concept_id:t.sideEffects[a],value_coded:t.getCoded(t.sides,t.sideEffects[a])}}})),Object.keys(this.otherSideEffects).forEach((function(a){e.consultation.obs[a]={concept_id:7951,value_coded:t.otherSideEffects[a],child:{concept_id:t.otherSideEffects[a],value_coded:t.getCoded(t.otherSides,t.otherSideEffects[a])}}})),Object.keys(this.tbSymptoms).forEach((function(a){e.consultation.obs[a]={concept_id:t.tbSymptoms[a],value_coded:t.tbSymptoms[a],child:{concept_id:t.tbSymptoms[a],value_coded:t.getCoded(t.tbSymps,t.tbSymptoms[a])}}})),this.drugsToPrescribe.forEach((function(t){e.consultation.obs[t]={concept_id:1282,value_coded:t}})),this.$emit("addEncounter",e)},getCoded:function(t,e){return t.includes(e)?1065:1066}},watch:{onTb:{handler:function(t){p["a"].$emit("set-tb",this.onTb.value_coded)},deep:!0}}},Z=U,J=(a("244c"),Object(g["a"])(Z,z,G,!1,null,"55f25c80",null)),Q=J.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[t._v("Regimen")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRegimen,expression:"selectedRegimen"}],staticClass:"form-control",attrs:{id:"inputState"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedRegimen=e.target.multiple?a:a[0]}}},t._l(t.regimens,(function(e,n){return a("option",{key:n},[t._v(t._s(n))])})),0)]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[t._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ARVquantity,expression:"ARVquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:t.ARVquantity},on:{input:function(e){e.target.composing||(t.ARVquantity=e.target.value)}}})])]),a("div",{staticClass:"form-row"},[t._m(0),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[t._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.CPTquantity,expression:"CPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:t.CPTquantity},on:{input:function(e){e.target.composing||(t.CPTquantity=e.target.value)}}})])]),a("div",{staticClass:"form-row"},[t._m(1),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputZip"}},[t._v("Quantity")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.IPTquantity,expression:"IPTquantity"}],staticClass:"form-control",attrs:{type:"number",id:"inputZip"},domProps:{value:t.IPTquantity},on:{input:function(e){e.target.composing||(t.IPTquantity=e.target.value)}}})])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[t._v("CPT")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[t._v("IPT")])])}],tt=(a("498a"),{props:["date"],data:function(){return{regimens:[],selectedRegimen:null,selectedDrugs:[],drugOrder:[],nextAppointment:null,ARVquantity:null,CPTquantity:null,IPTquantity:null,prescribeARVs:!1,prescribeCPT:!1,prescribeIPT:!1,weight:null,latestWeight:null,CPTRegimens:[],IPTRegimens:[],onTb:!1}},methods:{getRegimens:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$route.params.id,t.next=3,d["a"].get("/programs/1/regimens?weight=".concat(this.weight,"&tb_dosage=true")).then((function(t){t.json().then((function(t){a.regimens=t}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCPT:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$route.params.id,t.next=3,d["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=Cotrimoxazole")).then((function(t){t.json().then((function(t){e.CPTRegimens=t}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getIPT:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$route.params.id,t.next=3,d["a"].get("/programs/1/regimen_extras?weight=".concat(this.weight,"&name=INH")).then((function(t){t.json().then((function(t){e.IPTRegimens=t}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveEncounter:function(){var t=this,e=[];this.selectedDrugs=[];var a=this.regimens[this.selectedRegimen],n={};this.ARVquantity&&this.selectedRegimen&&(a.forEach((function(e){t.selectedDrugs.push({drug_name:e.drug_name,drug_id:e.drug_id,units:e.units,am:e.am,pm:e.pm,quantity:t.ARVquantity})})),n.prescribeARV={concept_id:1282,value_coded:1085}),this.CPTquantity&&(this.CPTRegimens.forEach((function(e){t.selectedDrugs.push({drug_name:e.drug_name,drug_id:e.drug_id,units:e.units,am:e.am,pm:e.pm,quantity:t.CPTquantity})})),n.prescribeCPT={concept_id:1282,value_coded:916}),this.IPTquantity&&(this.IPTRegimens.forEach((function(e){t.selectedDrugs.push({drug_name:e.drug_name,drug_id:e.drug_id,units:e.units,am:e.am,pm:e.pm,quantity:t.IPTquantity})})),n.prescribeIPT={concept_id:1282,value_coded:656});for(var i=0;i<this.selectedDrugs.length;i++){var s=parseFloat(this.selectedDrugs[i]["am"]),r=parseFloat(this.selectedDrugs[i]["pm"]),o="ONCE A DAY (OD)",c=s+r,u=this.selectedDrugs[i].drug_name+":- Morning: "+s+" tab(s), Evening: "+r+" tabs",l=0;0==r&&(l=s),0==s&&(l=r),s>0&&r>0&&(o="TWICE A DAY (BD)",l=(s+r)/2);var d={drug_inventory_id:this.selectedDrugs[i].drug_id,dose:l,equivalent_daily_dose:c,frequency:o,start_date:h()(this.date).format("YYYY-MM-DD"),auto_expire_date:h()(this.date).add(this.quantity/c+2,"days").format("YYYY-MM-DD"),instructions:u,units:this.selectedDrugs[i].units,qty:this.selectedDrugs[i].quantity};"Cotrimoxazole (480mg tablet)"===this.selectedDrugs[i].drug_name||e.push(d)}var p={prescription:{encounter_id:25,drug_orders:e}},m={consultation2:{encounter_id:53,obs:n}};this.$emit("addEncounter",p),this.$emit("addEncounter",m)}},mounted:function(){var t=this;this.latestWeight=this.$store.state.currentWeight,this.weight=this.latestWeight,this.getRegimens(),p["a"].$on("set-weight",(function(e){t.selectedRegimen=null,t.ARVquantity=null,""===e.trim()?t.weight=t.latestWeight:t.weight=e,t.getRegimens(),t.getCPT(),t.getIPT()})),p["a"].$on("set-initial-weight",(function(e){t.latestWeight=e,t.weight=e,t.getRegimens(),t.getCPT(),t.getIPT()})),p["a"].$on("set-tb",(function(e){t.onTb="1065"===e}))}}),et=tt,at=Object(g["a"])(et,X,K,!1,null,null,null),nt=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"form-row"},[t._m(0),a("div",{staticClass:"form-group col-md-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pillCount,expression:"pillCount"}],staticClass:"form-control",attrs:{type:"number",id:"pill-count"},domProps:{value:t.pillCount},on:{input:function(e){e.target.composing||(t.pillCount=e.target.value)}}})])])])},st=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"inputState"}},[t._v("Pill Count")])])}];function rt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ot(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(a),!0).forEach((function(e){Object(u["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ct={props:["date"],data:function(){return{pillCount:null,lastDrugs:[],adherence:0}},methods:{saveEncounter:function(){var t=this,e={},a=6987,n=2540;this.lastDrugs.forEach((function(i){var s=t.calculateExpected(i.quantity,i.equivalent_daily_dose,i.order.start_date),r=t.calculateAdherence(i.quantity,t.pillCount,s);e["adherence"+i.order_id]={concept_id:a,value_drug:i.drug_inventory_id,order_id:i.order_id,value_numeric:r,value_modifier:"%",person_id:t.$route.params.id},e["amount"+i.order_id]={concept_id:n,order_id:i.order_id,value_numeric:t.pillCount,person_id:t.$route.params.id}}));var i={adherence:{encounter_id:68,obs:ot({},e)}};this.$emit("addEncounter",i)},calculateExpected:function(t,e,a){var n=new Date(this.date),i=new Date(a),s=this.dateDiffInDays(i,n);return t-s*parseFloat(e)},calculateAdherence:function(t,e,a){return Math.round(100*(t-e)/(t-a))},getLastOrder:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.id,t.next=3,d["a"].get("/programs/1/patients/".concat(e,"/last_drugs_received")).then((function(t){t.json().then((function(t){a.lastDrugs=t}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),dateDiffInDays:function(t,e){var a=Math.abs(e.getTime()-t.getTime()),n=Math.ceil(a/864e5);return n}},mounted:function(){this.getLastOrder()}},ut=ct,lt=Object(g["a"])(ut,it,st,!1,null,null,null),dt=lt.exports,pt=a("cf40"),mt={props:["date"],data:function(){return{encounters:{},numEnc:0,patientPresent:!1,posting:!1,verifiedEnc:[]}},components:{vitals:P["a"],"clinic-registration":D["a"],reception:V,appointment:H,staging:M["a"],consultation:Q,prescription:nt,adherence:dt},methods:{addEncounter:function(t){var e=Object.keys(t)[0];this.encounters[e]=t[e]},saveEncounter:function(t){var e=this,a=[],n={url:"observations"};Object.keys(t).includes("obs")?(Object.keys(t.obs).forEach((function(n){var i=t.obs[n][e.getExpected(t.obs[n])];null!==i&&""!==i&&a.push(t.obs[n])})),n.observations=a,a.length>0&&(this.verifiedEnc.push(t.encounter_id),this.postEncounter(n,t.encounter_id))):Object.keys(t).includes("drug_orders")&&(n.drug_orders=t.drug_orders,n.url="drug_orders",n.drug_orders.length>0&&(this.verifiedEnc.push(t.encounter_id),this.postEncounter(n,t.encounter_id)))},postEncounter:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,s,r,o,c,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.$route.params.id,t.next=3,pt["a"].createEncounter(n,a,this.date);case 3:if(i=t.sent,this.successfulOperation=!0,201!==i.status&&200!==i.status){t.next=33;break}return s=i.encounter_id,e.encounter_id=s,t.next=10,d["a"].post(e.url,e);case 10:if(r=t.sent,201!==r.status&&200!==r.status){t.next=28;break}if("drug_orders"!==e.url){t.next=21;break}return t.next=15,r.json();case 15:return o=t.sent,c=[],o.forEach((function(t){var a=e.drug_orders.filter((function(e){return e.drug_inventory_id===t.drug_inventory_id}));c.push({date:u.date,drug_order_id:t.order_id,quantity:a[0]["qty"]})})),t.next=20,d["a"].post("/dispensations",{dispensations:c,program_id:1});case 20:t.sent;case 21:this.numEnc++,this.numEnc===this.verifiedEnc.length&&(this.posting=!1,p["a"].$emit("reload-visits",""),this.$toasted.show("Encounter Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","encounter-modal","#btnShow")),this.success=!0,this.fail=!1,this.postResponse="Appointment has been set.",t.next=31;break;case 28:this.$toasted.show("Some Observations failed to save !!",{theme:"toasted-primary",position:"top-right",duration:5e3}),this.fail=!0,this.postResponse="Appointment could not be set.";case 31:t.next=36;break;case 33:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 36:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),createEncounters:function(){var t=this;this.posting=!0;var e=Object.keys(this.$refs);e.forEach((function(e){t.$refs[e].saveEncounter()}));var a=Object.keys(this.encounters);a.forEach((function(e){t.saveEncounter(t.encounters[e])}))},getExpected:function(t){var e=["value_group_id","value_boolean","value_coded","value_coded_name_id","value_drug","value_datetime","value_numeric","value_modifier","value_text"],a="";return Object.keys(t).filter((function(t){e.includes(t)&&(a=t)})),a},removeModal:function(){var t=document.getElementById("exampleModalCenter");t.classList.remove("show"),t.setAttribute("aria-hidden","true"),t.setAttribute("style","display: none");var e=document.getElementsByClassName("modal-backdrop");document.body.removeChild(e[0])}},mounted:function(){var t=this;p["a"].$on("set-present",(function(e){t.patientPresent="1066"!==e}))}},vt=mt,ht=Object(g["a"])(vt,S,$,!1,null,null,null),ft=ht.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[t._m(0),t.states.length>0?a("select",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],staticClass:"form-control",attrs:{name:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.state=e.target.multiple?a:a[0]}}},t._l(t.states,(function(e,n){return a("option",{key:n,domProps:{value:{state_id:e.program_workflow_state_id,name:e.name}}},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()])]),a("div",{staticClass:"col"},[a("div",{staticClass:"input-group mb-3"},[t._m(1),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date","aria-label":"Default","aria-describedby":"inputGroup-sizing-default"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),"Patient transferred out"===t.state.name?a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:t.locations,placeholder:"test location"},on:{search:t.getlocations,input:t.getVal}})],1)]):t._e(),a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-primary",on:{click:t.postOutcome}},[t._v("Submit")])])]),a("div",{staticClass:"text-center"},t._l(t.errors,(function(e,n){return a("p",{key:n,staticStyle:{color:"red"}},[t._v(" "+t._s(e))])})),0),a("table",{staticClass:"table table-bordered"},[t._m(2),a("tbody",t._l(t.outcomes,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(t.moment(e.start_date).format("DD-MMM-YYYY")))]),e.end_date?a("td",[t._v(t._s(t.moment(e.end_date).format("DD-MMM-YYYY")))]):a("td"),a("td",[a("button",{staticClass:"btn btn-danger",on:{click:function(a){return t.voidState(e.patient_state_id,n)}}},[t.voiding?[a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),a("span",{staticClass:"sr-only"},[t._v("Loading...")])]:[a("span",[t._v("X")])]],2)])])})),0)])])},gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"height"}},[t._v("Outcome")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v("Outcome Date")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",[t._v("Outcome")]),a("th",[t._v("Start Date")]),a("th",[t._v("End Date")])])])}],bt=(a("6dfc"),a("4a7a")),yt=a.n(bt),Ct={components:{"v-select":yt.a},data:function(){return{states:[],errors:[],state:{},outcomes:[],date:null,locations:[],location:null,voiding:!1}},methods:{getOutcomes:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/programs/1/workflows").then((function(t){t.json().then((function(t){e.states=t[0].states}))}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getPatientOutcomes:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].get("/patients/".concat(this.$route.params.id,"/programs")).then((function(t){t.json().then((function(t){e.outcomes=t.filter((function(t){return 1===t.program_id}))[0]["patient_states"]}))}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),voidState:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.voiding=!0,n="/programs/1/patients/".concat(this.$route.params.id,"/states/").concat(e,"?reason='duplicate / system error'"),t.next=4,d["a"].remove(n);case 4:i=t.sent,201===i.status||204===i.status?(p["a"].$emit("reload-visits",""),this.$toasted.show("Outcome deleted",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.voiding=!1,this.outcomes.splice(a,1)):(console.log(i.status),console.log("Failed to update"));case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),postOutcome:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.errors=[],0===Object.keys(this.state).length&&this.errors.push("Outcome is required"),null!==this.date&&""!==this.date||this.errors.push("Date is required"),e={state:this.state.state_id,date:h()(this.date).format("YYYY-MM-DD")},"Patient transferred out"===this.state.name&&(e.location_id=this.location,null==this.location&&this.errors.push("Location is required")),0!==this.errors.length){t.next=11;break}return a=this.$route.params.id,t.next=9,d["a"].post("programs/1/patients/".concat(a,"/states"),e);case 9:n=t.sent,201===n.status||200===n.status?(p["a"].$emit("reload-visits",""),this.$toasted.show("Outcome Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","outcome-modal","#btnShow")):console.log("Failed to update");case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getlocations:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.locations=[],t.next=3,d["a"].get("/locations?name="+e).then((function(t){t.json().then((function(t){t.forEach((function(t){a.locations.push({label:t.name,code:t.name,location_id:t.location_id})}))}))}));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getVal:function(t){this.location=t.location_id}},mounted:function(){this.getOutcomes(),this.getPatientOutcomes()}},xt=Ct,wt=Object(g["a"])(xt,_t,gt,!1,null,null,null),kt=wt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:t.options,placeholder:"modifier"},model:{value:t.modifier,callback:function(e){t.modifier=e},expression:"modifier"}})],1)]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"form-inline"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Viral Load")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.viralLoad,expression:"viralLoad"}],staticClass:"form-control",attrs:{type:"number",name:"",id:"",placeholder:"","aria-describedby":"helpId"},domProps:{value:t.viralLoad},on:{input:function(e){e.target.composing||(t.viralLoad=e.target.value)}}}),a("label",{attrs:{for:""}},[t._v("Date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-control",attrs:{type:"date",name:"",id:"date",placeholder:"","aria-describedby":"helpId"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])])]),a("br"),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.saveEncounter}},[t._v("Save")])])])},Nt=[],Ot={components:{"v-select":yt.a},data:function(){return{patient:{value_coded:null,concept_id:1805},guardian:{value_coded:null,concept_id:2122},options:["=",">","<","=>","=<"],modifier:null,viralLoad:null,date:null}},methods:{saveEncounter:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.id,a={order_type_id:4,concept_id:856,start_date:this.date,observation:{concept_id:856,obs_datetime:this.date,value_numeric:this.viralLoad,value_text:this.modifier}},n={order_type_id:4,concept_id:856,start_date:this.date,patient_id:e},t.next=5,pt["a"].createEncounter(e,13);case 5:if(i=t.sent,201!==i.status&&200!==i.status){t.next=24;break}return s=i.encounter_id,n.encounter_id=s,t.next=11,d["a"].post("orders",n);case 11:if(r=t.sent,201!==r.status&&200!==r.status){t.next=19;break}return t.next=15,d["a"].post("observations",{encounter_id:s,observations:[a.observation]});case 15:o=t.sent,201===o.status||200===o.status?(this.posting=!1,p["a"].$emit("reload-visits",""),this.$toasted.show("Viral Load Saved",{theme:"toasted-primary",position:"top-right",duration:2e3}),this.$root.$emit("bv::hide::modal","viral-load-modal","#btnShow")):(this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set."),t.next=22;break;case 19:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 22:t.next=27;break;case 24:this.success=!1,this.fail=!0,this.postResponse="Appointment could not be set.";case 27:console.log(a);case 28:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Tt=Ot,Dt=Object(g["a"])(Tt,Et,Nt,!1,null,null,null),St=Dt.exports,$t={name:"home",components:{"top-nav":s["a"],"side-bar":r["a"],"patient-information":y,"visit-data":T,"clinic-registration":D["a"],encounter:ft,outcome:kt,"viral-load":St},data:function(){return{date:h()().format("YYYY-MM-DD")}}},Pt=$t,Rt=(a("29bc"),Object(g["a"])(Pt,n,i,!1,null,null,null));e["default"]=Rt.exports},"9e28":function(t,e,a){},a434:function(t,e,a){"use strict";var n=a("23e7"),i=a("23cb"),s=a("a691"),r=a("50c4"),o=a("7b0b"),c=a("65f0"),u=a("8418"),l=a("1dde"),d=a("ae40"),p=l("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,h=Math.min,f=9007199254740991,_="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,n,l,d,p,m,g=o(this),b=r(g.length),y=i(t,b),C=arguments.length;if(0===C?a=n=0:1===C?(a=0,n=b-y):(a=C-2,n=h(v(s(e),0),b-y)),b+a-n>f)throw TypeError(_);for(l=c(g,n),d=0;d<n;d++)p=y+d,p in g&&u(l,d,g[p]);if(l.length=n,a<n){for(d=y;d<b-n;d++)p=d+n,m=d+a,p in g?g[m]=g[p]:delete g[m];for(d=b;d>b-n+a;d--)delete g[d-1]}else if(a>n)for(d=b-n;d>y;d--)p=d+n-1,m=d+a-1,p in g?g[m]=g[p]:delete g[m];for(d=0;d<a;d++)g[d+y]=arguments[d+2];return g.length=b-n+a,l}})},be43:function(t,e,a){},c8d2:function(t,e,a){var n=a("d039"),i=a("5899"),s="​᠎";t.exports=function(t){return n((function(){return!!i[t]()||s[t]()!=s||i[t].name!==t}))}},e38a:function(t,e,a){"use strict";var n=a("9e28"),i=a.n(n);i.a},e6ad:function(t,e,a){"use strict";var n=a("16bf"),i=a.n(n);i.a},fcd4:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7d3b5608.42285fac.js.map