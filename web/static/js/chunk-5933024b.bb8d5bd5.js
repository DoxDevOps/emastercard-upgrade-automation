(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5933024b"],{"08a6":function(e,t,r){"use strict";var a=r("fc32"),n=r.n(a);n.a},29299:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[r("side-bar"),r("div",{attrs:{id:"page-content-wrapper"}},[r("top-nav"),r("div",{attrs:{id:"main-container"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12",staticStyle:{"z-index":"30"}},[r("span",[e._v(e._s(e.report_title)),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.$router.go(-1)}}},[e._v("Back")])]),r("sdPicker",{attrs:{onSubmit:e.fetchDates}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12"},[r("ReportOverlay",{attrs:{reportLoading:e.reportLoading,reportSelected:e.reportSelected}},[r("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[r("thead",[r("tr",[r("th",[e._v("#")]),r("th",[e._v("Age group")]),r("th",[e._v("Gender")]),r("th",{staticClass:"disaggregated-numbers"},[e._v("Tx new (new on ART)")]),r("th",{staticClass:"disaggregated-numbers"},[e._v("TX curr (receiving ART)")]),r("th",{staticClass:"disaggregated-numbers"},[e._v("TX curr (received IPT)")]),r("th",{staticClass:"disaggregated-numbers"},[e._v("TX curr (screened for TB)")])])]),r("tbody",{ref:"tableBody"}),r("tfoot",[r("tr",[r("td",[e._v(" Date Created: "+e._s(e.moment().format("YYYY-MM-DD:h:m:s"))+" e-Mastercard Version : "+e._s(e.EMCVersion)+" API Version "+e._s(e.APIVersion)+" ")])])])])])],1)])])],1)],1)},n=[],s=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("159b"),r("ddb0"),r("ade3")),i=r("3835"),o=(r("96cf"),r("1da1")),c=r("8051"),l=r("ebd8"),u=r("7c08"),d=r("2f62"),p=r("c1df"),f=r.n(p),h=r("4dfe"),g=r("8e71"),b=r("1157"),m=r.n(b);r("6810");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("2cdf"),r("fd5e"),r("5caa"),r("c3dc"),r("4e95"),r("a8a1"),r("919c"),r("4b69"),r("7dae"),r("a821");var _={name:"reports",components:{ReportOverlay:g["a"],"top-nav":l["a"],"side-bar":u["a"],sdPicker:h["a"]},methods:{fetchDates:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a=Object(i["a"])(e,2),t.startDate=a[0],t.endDate=a[1],n=function(e){return e&&"Invalid date"!==e},n(t.startDate)&&n(t.endDate)){r.next=7;break}return r.abrupt("return");case 7:return t.report_title="PEPFAR "+sessionStorage.location_name+" cohort disaggregated report ",t.report_title+=f()(e[0]).format("DDMMMYYYY"),t.report_title+=" - "+f()(e[1]).format("DDMMMYYYY"),t.reportLoading=!0,t.reportSelected=!0,t.initDataTable(),r.next=15,t.initializeReport();case 15:r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](0),t.$router.push({name:"error",params:{message:r.t0.message}});case 20:return r.prev=20,t.reportLoading=!1,r.finish(20);case 23:case"end":return r.stop()}}),r,null,[[0,17,20,23]])})))()},initDataTable:function(){this.dTable=m()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,searching:!1,paging:!1,Processing:!0,ServerSide:!0,scroller:{loadingIndicator:!0},dom:"Bfrtip",buttons:[{extend:"copy",title:this.report_title},{extend:"csv",title:this.report_title,footer:!0},{extend:"pdf",title:this.report_title},{extend:"print",title:this.report_title}]})},checkResult:function(e){},datatableEnable:function(e){for(var t in this.formatedData=[],e);},addTableBody:function(){for(var e=["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"],t=this.$refs.tableBody,r=1,a=["Female","Male"],n=0;n<a.length;n++)for(var s=0;s<e.length;s++){var i=document.createElement("tr");i.setAttribute("class",a[n]+"_row"),t.appendChild(i);var o=0;while(o<7){var c=document.createElement("td");i.appendChild(c),0==o&&(c.innerHTML=r++),1==o&&(c.innerHTML=e[s]),2==o&&(c.innerHTML=a[n]),o>2&&(c.innerHTML=0,c.setAttribute("class","disaggregated-numbers")),i.appendChild(c),o++}}},initializeReport:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="cohort_disaggregated",t+="?date="+f()().format("YYYY-MM-DD"),t+="&quarter=pepfar",t+="&age_group="+this.ageGroups[0],t+="&rebuild_outcome="+this.rebuildOutcome,t+="&initialize=false",t+="&start_date="+this.startDate,t+="&end_date="+this.endDate,t+="&program_id=1",e.next=11,c["a"].get(t);case 11:if(r=e.sent,200!==r.status){e.next=22;break}return this.rebuildOutcome=!1,e.t0=this,e.next=17,r.json();case 17:return e.t1=e.sent,e.next=20,e.t0.addData.call(e.t0,e.t1);case 20:e.next=22;break;case 22:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s,i,o,c,l,u,d,p,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(a=t.$refs.tableBody.children,i=0;i<a.length;i++)for(o=a[i].children,c=0;c<o.length;c++)o[c].innerHTML==t.ageGroups[0]&&("Female"==o[2].innerHTML?n=a[i]:s=a[i]);for(l in e)for(d in u=e[l],u)p="F"==d?n:s,f=e[l][d],p.children[3].innerHTML=f.tx_new,p.children[4].innerHTML=f.tx_curr,t.screenedTB.push([p.children[6],d,l]),t.givenIPT.push([p.children[5],d,l]),"M"==d?(t.totalMales[0]+=f.tx_new,t.totalMales[1]+=f.tx_curr):(t.totalFemales[0]+=f.tx_new,t.totalFemales[1]+=f.tx_curr);if(t.ageGroups.length>0&&t.ageGroups.shift(),!(t.ageGroups.length>0)){r.next=7;break}return r.next=7,t.initializeReport();case 7:if(!(t.ageGroups.length<1)){r.next=10;break}return r.next=10,t.addTBscreenedData();case 10:case"end":return r.stop()}}),r)})))()},addTBscreenedData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.screenedTB.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.screenedTB[0][2],r=this.screenedTB[0][1],a=this.screenedTB[0][0],n="screened_for_tb",n+="?date="+f()().format("YYYY-MM-DD"),n+="&outcome_table=temp_pepfar_patient_outcomes",n+="&age_group="+t,n+="&gender="+r,n+="&start_date="+this.startDate,n+="&end_date="+this.endDate,n+="&program_id=1",e.next=15,c["a"].get(n);case 15:if(s=e.sent,200!==s.status){e.next=34;break}return this.screenedTB.shift(),e.t0=this,e.t1=a,e.t2=r,e.next=23,s.json();case 23:if(e.t3=e.sent,e.t0.TBscreened.call(e.t0,e.t1,e.t2,e.t3),!(this.screenedTB.length<1)){e.next=30;break}return e.next=28,this.addGivenIPTdata();case 28:e.next=32;break;case 30:return e.next=32,this.addTBscreenedData();case 32:e.next=34;break;case 34:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addGivenIPTdata:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.givenIPT[0][2],r=this.givenIPT[0][1],a=this.givenIPT[0][0],n="clients_given_ipt",n+="?date="+f()().format("YYYY-MM-DD"),n+="&outcome_table=temp_pepfar_patient_outcomes",n+="&age_group="+t,n+="&gender="+r,n+="&start_date="+this.startDate,n+="&end_date="+this.endDate,n+="&program_id=1",e.next=13,c["a"].get(n);case 13:if(s=e.sent,200!==s.status){e.next=32;break}return this.givenIPT.shift(),e.t0=this,e.t1=a,e.t2=r,e.next=21,s.json();case 21:if(e.t3=e.sent,e.t0.iptGiven.call(e.t0,e.t1,e.t2,e.t3),!(this.givenIPT.length<1)){e.next=28;break}return e.next=26,this.allMales();case 26:e.next=30;break;case 28:return e.next=30,this.addGivenIPTdata();case 30:e.next=32;break;case 32:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),iptGiven:function(e,t,r){e.innerHTML=r.length,"M"==t?this.totalMales[2]+=r.length:this.totalFemales[2]+=r.length},TBscreened:function(e,t,r){e.innerHTML=r.length,"M"==t?this.totalMales[3]+=r.length:this.totalFemales[3]+=r.length},allMales:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dTable.fnAddData(["31","All","Male",e.totalMales[0],e.totalMales[1],e.totalMales[2],e.totalMales[3]]),t.next=3,e.getAllFemale("Pregnant");case 3:case"end":return t.stop()}}),t)})))()},getAllFemale:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="cohort_disaggregated",r+="?date="+f()().format("YYYY-MM-DD"),r+="&outcome_table=temp_pepfar_patient_outcomes",r+="&age_group="+t,r+="&start_date="+this.startDate,r+="&end_date="+this.endDate,r+="&program_id=1",r+="&quarter=pepfar",r+="&initialize=false",r+="&rebuild_outcome="+this.rebuildOutcome,e.next=12,c["a"].get(r);case 12:if(a=e.sent,200!==a.status){e.next=21;break}return e.t0=this,e.t1=t,e.next=18,a.json();case 18:return e.t2=e.sent,e.next=21,e.t0.addNewFemaleRow.call(e.t0,e.t1,e.t2);case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addNewFemaleRow:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,s,i,o,c,l,u,d,p,f,h,g,b;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=regeneratorRuntime.keys(t);case 1:if((a.t1=a.t0()).done){a.next=30;break}n=a.t1.value,s=t[n],a.t2=regeneratorRuntime.keys(s);case 5:if((a.t3=a.t2()).done){a.next=28;break}if(i=a.t3.value,o=t[n][i].tx_new,c=t[n][i].tx_curr,l=t[n][i].tx_screened_for_tb,u=t[n][i].tx_given_ipt,"Pregnant"!=e){a.next=20;break}return d=r.dTable.fnAddData(["32","All","FP",o,c,u,l]),p=r.dTable.fnSettings(),f=p.aoData[d[0]].nTr,r.fpRow=f,a.next=18,r.getAllFemale("Breastfeeding");case 18:a.next=26;break;case 20:return h=r.dTable.fnAddData(["33","All","Fbf",o,c,u,l]),g=r.dTable.fnSettings(),b=g.aoData[h[0]].nTr,r.fbfRow=b,a.next=26,r.loadFPdata("pregnant","screened_for_tb");case 26:a.next=5;break;case 28:a.next=1;break;case 30:case"end":return a.stop()}}),a)})))()},loadFPdata:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r,a+="?date="+f()().format("YYYY-MM-DD"),a+="&start_date="+this.startDate,a+="&end_date="+this.endDate,a+="&gender="+t,a+="&age_group="+t,a+="&outcome_table=temp_pepfar_patient_outcomes",a+="&program_id=1",e.next=10,c["a"].get(a);case 10:if(n=e.sent,200!==n.status||"pregnant"!=t||"screened_for_tb"!=r){e.next=22;break}return e.t0=this,e.t1=this.fpRow,e.next=16,n.json();case 16:return e.t2=e.sent.length,e.t0.assignValueTD.call(e.t0,e.t1,e.t2,2),e.next=20,this.loadFPdata("breastfeeding",r);case 20:e.next=52;break;case 22:if(200!==n.status||"breastfeeding"!=t||"screened_for_tb"!=r){e.next=33;break}return e.t3=this,e.t4=this.fbfRow,e.next=27,n.json();case 27:return e.t5=e.sent.length,e.t3.assignValueTD.call(e.t3,e.t4,e.t5,2),e.next=31,this.loadFPdata("pregnant","clients_given_ipt");case 31:e.next=52;break;case 33:if(200!==n.status||"pregnant"!=t){e.next=44;break}return e.t6=this,e.t7=this.fpRow,e.next=38,n.json();case 38:return e.t8=e.sent.length,e.t6.assignValueTD.call(e.t6,e.t7,e.t8,1),e.next=42,this.loadFPdata("breastfeeding",r);case 42:e.next=52;break;case 44:if(200!==n.status||"breastfeeding"!=t){e.next=52;break}return e.t9=this,e.t10=this.fbfRow,e.next=49,n.json();case 49:e.t11=e.sent.length,e.t9.assignValueTD.call(e.t9,e.t10,e.t11,1),this.addAllFemaleRow();case 52:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),assignValueTD:function(e,t,r){1==r?console.log(m()("td",e)[5].innerHTML=t):console.log(m()("td",e)[6].innerHTML=t)},addAllFemaleRow:function(){for(var e=this.$refs.tableBody.children,t=0;t<e.length;t++){var r=e[t].children[0],a=e[t].children;"32"!=r.innerHTML&&"33"!=r.innerHTML||(this.totalFemales[0]-=parseInt(a[3].innerHTML),this.totalFemales[1]-=parseInt(a[4].innerHTML),this.totalFemales[2]-=parseInt(a[5].innerHTML),this.totalFemales[3]-=parseInt(a[6].innerHTML))}this.dTable.fnAddData(["34","All","FNP",this.totalFemales[0],this.totalFemales[1],this.totalFemales[2],this.totalFemales[3]]),this.dTable.fnDestroy(),this.initDataTable()}},mounted:function(){var e=this;setTimeout((function(){return e.addTableBody()}),300)},data:function(){return{reportData:null,dTable:null,formatedData:[],rebuildOutcome:!0,startDate:null,endDate:null,screenedTB:[],givenIPT:[],totalMales:[0,0,0,0],totalFemales:[0,0,0,0],report_title:null,fpRow:null,fbfRow:null,ageGroups:["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"].reverse(),reportLoading:!1,reportSelected:!1,APIVersion:sessionStorage.APIVersion,EMCVersion:sessionStorage.EMCVersion}},computed:D({},Object(d["c"])(["location"]))},x=_,y=(r("709b"),r("08a6"),r("2877")),w=Object(y["a"])(x,a,n,!1,null,"56482c5a",null);t["default"]=w.exports},"336a":function(e,t,r){"use strict";var a=r("df61"),n=r.n(a);n.a},3835:function(e,t,r){"use strict";function a(e){if(Array.isArray(e))return e}r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function n(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],a=!0,n=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0)if(r.push(i.value),t&&r.length===t)break}catch(c){n=!0,s=c}finally{try{a||null==o["return"]||o["return"]()}finally{if(n)throw s}}return r}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(e,t){return a(e)||n(e,t)||s()}r.d(t,"a",(function(){return i}))},"47e0":function(e,t,r){},"4dfe":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ctrs"},[r("div",{staticClass:"ctr-table"},[r("div",{staticClass:"ctr-row"},[r("div",{staticClass:"ctr-cell"},[r("date-pick",{staticClass:"date-inputs",attrs:{format:e.format,parseDate:e.parseDate,formatDate:e.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),r("div",{staticClass:"ctr-cell"},[r("date-pick",{staticClass:"date-inputs",attrs:{format:e.format,parseDate:e.parseDate,formatDate:e.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),r("div",{staticClass:"ctr-cell"},[r("button",{staticClass:"btn btn-success",on:{click:e.submitDates}},[e._v("Submit")])])])])])},n=[],s=r("f0ca"),i=r.n(s),o=r("c1df"),c=r.n(o),l=(r("6f3c"),r("1789")),u={components:{DatePick:i.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:l["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=c()(this.startDate).format("YYYY-MM-DD"),this.endDate=c()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(e,t){return l["a"].parse(e,t)},formatDate:function(e,t){return l["a"].format(e,t)}},mounted:function(){var e=this;setTimeout((function(){return e.initDates()}),300)}},d=u,p=(r("336a"),r("2877")),f=Object(p["a"])(d,a,n,!1,null,"15deca72",null);t["a"]=f.exports},"709b":function(e,t,r){"use strict";var a=r("47e0"),n=r.n(a);n.a},"8e71":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-overlay",{attrs:{show:e.hideReport,"no-center":!0,"spinner-type":"grow","spinner-variant":"primary"},scopedSlots:e._u([{key:"overlay",fn:function(){return[r("div",{staticStyle:{display:"block","min-height":"720px",width:"100%","padding-top":"20%"}},[e.reportSelected?e._e():r("h1",[e._v("No Report Selected")]),e.reportSelected?r("b-spinner",{attrs:{type:"grow",variant:"primary"}}):e._e()],1)]},proxy:!0}])},[e._t("default")],2)},n=[],s={name:"report-overlay",props:{reportLoading:{type:Boolean,required:!0},reportSelected:{type:Boolean,default:!0}},computed:{hideReport:function(){return this.reportLoading||!this.reportSelected}}},i=s,o=r("2877"),c=Object(o["a"])(i,a,n,!1,null,null,null);t["a"]=c.exports},df61:function(e,t,r){},fc32:function(e,t,r){}}]);
//# sourceMappingURL=chunk-5933024b.bb8d5bd5.js.map