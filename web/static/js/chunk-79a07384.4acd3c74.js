(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79a07384"],{"08a6":function(t,e,a){"use strict";var n=a("fc32"),r=a.n(n);r.a},2929:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex",attrs:{id:"wrapper"}},[a("side-bar"),a("div",{attrs:{id:"page-content-wrapper"}},[a("top-nav"),a("div",{staticClass:"col-12 table-col",attrs:{id:"main-container"}},[a("span",[t._v(t._s(t.report_title)),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Back")])]),a("sdPicker",{attrs:{onSubmit:t.fetchDates}}),a("table",{staticClass:"table table-striped report",attrs:{id:"cohort-clients"}},[t._m(0),a("tbody",{ref:"tableBody"})])],1)],1)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Age group")]),a("th",[t._v("Gender")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("Tx new (new on ART)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (receiving ART)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (received IPT)")]),a("th",{staticClass:"disaggregated-numbers"},[t._v("TX curr (screened for TB)")])])])}],s=a("ade3"),i=(a("96cf"),a("1da1")),o=a("8051"),l=a("ebd8"),c=a("7c08"),d=a("c1df"),u=a.n(d),h=a("4dfe"),f=a("1157"),p=a.n(f);a("6810");a("2cdf"),a("fd5e"),a("5caa"),a("c3dc"),a("4e95"),a("a8a1"),a("919c"),a("4b69"),a("7dae"),a("a821");var g={name:"reports",components:{"top-nav":l["a"],"side-bar":c["a"],sdPicker:h["a"]},methods:{fetchDates:function(t){this.startDate=t[0],this.endDate=t[1],this.initializeReport()},initDataTable:function(){this.dTable=p()("#cohort-clients").dataTable({order:[[0,"asc"]],fixedHeader:!0,searching:!1,paging:!1,Processing:!0,ServerSide:!0,scroller:{loadingIndicator:!0},dom:"Bfrtip",buttons:[{extend:"copy",title:this.report_title},{extend:"csv",title:this.report_title},{extend:"pdf",title:this.report_title},{extend:"print",title:this.report_title}]})},checkResult:function(t){},datatableEnable:function(t){for(var e in this.formatedData=[],t);},addTableBody:function(){for(var t=this,e=["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"],a=this.$refs.tableBody,n=1,r=["Female","Male"],s=0;s<r.length;s++)for(var i=0;i<e.length;i++){var o=document.createElement("tr");o.setAttribute("class",r[s]+"_row"),a.appendChild(o);var l=0;while(l<7){var c=document.createElement("td");o.appendChild(c),0==l&&(c.innerHTML=n++),1==l&&(c.innerHTML=e[i]),2==l&&(c.innerHTML=r[s]),l>2&&(c.innerHTML=0,c.setAttribute("class","disaggregated-numbers")),o.appendChild(c),l++}}setTimeout((function(){return t.initDataTable()}),300)},initializeReport:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.report_title=sessionStorage.location_name+" PEPFAR Disaggregated report",e="cohort_disaggregated",e+="?date="+u()().format("YYYY-MM-DD"),e+="&quarter=pepfar",e+="&age_group="+this.ageGroups[0],e+="&rebuild_outcome="+this.rebuildOutcome,e+="&initialize=false",e+="&start_date="+this.startDate,e+="&end_date="+this.endDate,e+="&program_id=1",t.next=12,o["a"].get(e,{},{});case 12:a=t.sent,200===a.status&&(this.rebuildOutcome=!1,a.json().then((function(t){return setTimeout((function(){return n.addData(t)}),5e3)})));case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addData:function(t){for(var e,a,n=this.$refs.tableBody.children,r=0;r<n.length;r++)for(var s=n[r].children,i=0;i<s.length;i++)s[i].innerHTML==this.ageGroups[0]&&("Female"==s[2].innerHTML?e=n[r]:a=n[r]);for(var o in t){var l=t[o];for(var c in l){var d="F"==c?e:a,u=t[o][c];d.children[3].innerHTML=u.tx_new,d.children[4].innerHTML=u.tx_curr,this.screenedTB.push([d.children[6],c,o]),this.givenIPT.push([d.children[5],c,o]),"M"==c?(this.totalMales[0]+=u.tx_new,this.totalMales[1]+=u.tx_curr):(this.totalFemales[0]+=u.tx_new,this.totalFemales[1]+=u.tx_curr)}}this.ageGroups.length>0&&this.ageGroups.shift(),this.ageGroups.length>0&&this.initializeReport(),this.ageGroups.length<1&&this.addTBscreenedData()},addTBscreenedData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.screenedTB[0][2],a=this.screenedTB[0][1],n=this.screenedTB[0][0],r="screened_for_tb",r+="?date="+u()().format("YYYY-MM-DD"),r+="&outcome_table=temp_pepfar_patient_outcomes",r+="&age_group="+e,r+="&gender="+a,r+="&start_date="+this.startDate,r+="&end_date="+this.endDate,r+="&program_id=1",t.next=13,o["a"].get(r,{},{});case 13:s=t.sent,200===s.status&&(this.screenedTB.shift(),s.json().then((function(t){return i.TBscreened(n,a,t)})),this.screenedTB.length<1?this.addGivenIPTdata():setTimeout((function(){return i.addTBscreenedData()}),500));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addGivenIPTdata:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.givenIPT[0][2],a=this.givenIPT[0][1],n=this.givenIPT[0][0],r="clients_given_ipt",r+="?date="+u()().format("YYYY-MM-DD"),r+="&outcome_table=temp_pepfar_patient_outcomes",r+="&age_group="+e,r+="&gender="+a,r+="&start_date="+this.startDate,r+="&end_date="+this.endDate,r+="&program_id=1",t.next=13,o["a"].get(r,{},{});case 13:s=t.sent,200===s.status&&(this.givenIPT.shift(),s.json().then((function(t){return i.iptGiven(n,a,t)})),this.givenIPT.length<1?this.allMales():setTimeout((function(){return i.addGivenIPTdata()}),500));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),iptGiven:function(t,e,a){t.innerHTML=a.length,"M"==e?this.totalMales[2]+=a.length:this.totalFemales[2]+=a.length},TBscreened:function(t,e,a){t.innerHTML=a.length,"M"==e?this.totalMales[3]+=a.length:this.totalFemales[3]+=a.length},allMales:function(){this.dTable.fnAddData(["31","All","Male",this.totalMales[0],this.totalMales[1],this.totalMales[2],this.totalMales[3]]),this.getAllFemale("Pregnant")},getAllFemale:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="cohort_disaggregated",a+="?date="+u()().format("YYYY-MM-DD"),a+="&outcome_table=temp_pepfar_patient_outcomes",a+="&age_group="+e,a+="&start_date="+this.startDate,a+="&end_date="+this.endDate,a+="&program_id=1",a+="&quarter=pepfar",a+="&initialize=false",a+="&rebuild_outcome="+this.rebuildOutcome,t.next=12,o["a"].get(a,{},{});case 12:n=t.sent,200===n.status&&n.json().then((function(t){return r.addNewFemaleRow(e,t)}));case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addNewFemaleRow:function(t,e){for(var a in e){var n=e[a];for(var r in n){var s=e[a][r].tx_new,i=e[a][r].tx_curr,o=e[a][r].tx_screened_for_tb,l=e[a][r].tx_given_ipt;if("Pregnant"==t){var c=this.dTable.fnAddData(["32","All","FP",s,i,l,o]),d=this.dTable.fnSettings(),u=d.aoData[c[0]].nTr;this.fpRow=u,this.getAllFemale("Breastfeeding")}else{var h=this.dTable.fnAddData(["33","All","Fbf",s,i,l,o]),f=this.dTable.fnSettings(),p=f.aoData[h[0]].nTr;this.fbfRow=p,this.loadFPdata("pregnant","screened_for_tb")}}}},loadFPdata:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a,n+="?date="+u()().format("YYYY-MM-DD"),n+="&start_date="+this.startDate,n+="&end_date="+this.endDate,n+="&gender="+e,n+="&age_group="+e,n+="&outcome_table=temp_pepfar_patient_outcomes",n+="&program_id=1",t.next=10,o["a"].get(n,{},{});case 10:r=t.sent,200===r.status&&"pregnant"==e&&"screened_for_tb"==a?(r.json().then((function(t){return s.assignValueTD(s.fpRow,t.length,2)})),this.loadFPdata("breastfeeding",a)):200===r.status&&"breastfeeding"==e&&"screened_for_tb"==a?(r.json().then((function(t){return s.assignValueTD(s.fbfRow,t.length,2)})),this.loadFPdata("pregnant","clients_given_ipt")):200===r.status&&"pregnant"==e?(r.json().then((function(t){return s.assignValueTD(s.fpRow,t.length,1)})),this.loadFPdata("breastfeeding",a)):200===r.status&&"breastfeeding"==e&&(r.json().then((function(t){return s.assignValueTD(s.fbfRow,t.length,1)})),setTimeout((function(){return s.addAllFemaleRow()}),5e3));case 12:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),assignValueTD:function(t,e,a){1==a?console.log(p()("td",t)[5].innerHTML=e):console.log(p()("td",t)[6].innerHTML=e)},addAllFemaleRow:function(){for(var t=this.$refs.tableBody.children,e=0;e<t.length;e++){var a=t[e].children[0],n=t[e].children;"32"!=a.innerHTML&&"33"!=a.innerHTML||(this.totalFemales[0]-=parseInt(n[3].innerHTML),this.totalFemales[1]-=parseInt(n[4].innerHTML),this.totalFemales[2]-=parseInt(n[5].innerHTML),this.totalFemales[3]-=parseInt(n[6].innerHTML))}this.dTable.fnAddData(["34","All","FNP",this.totalFemales[0],this.totalFemales[1],this.totalFemales[2],this.totalFemales[3]]),this.dTable.fnDestroy(),this.initDataTable()}},mounted:function(){var t=this;setTimeout((function(){return t.addTableBody()}),300)},data:function(){var t;return t={reportData:null,report_title:"PEPFAR Disaggregated "},Object(s["a"])(t,"reportData",null),Object(s["a"])(t,"dTable",null),Object(s["a"])(t,"formatedData",[]),Object(s["a"])(t,"rebuildOutcome",!0),Object(s["a"])(t,"startDate",null),Object(s["a"])(t,"endDate",null),Object(s["a"])(t,"screenedTB",[]),Object(s["a"])(t,"givenIPT",[]),Object(s["a"])(t,"totalMales",[0,0,0,0]),Object(s["a"])(t,"totalFemales",[0,0,0,0]),Object(s["a"])(t,"fpRow",null),Object(s["a"])(t,"fbfRow",null),Object(s["a"])(t,"ageGroups",["0-5 months","6-11 months","12-23 months","2-4 years","5-9 years","10-14 years","15-17 years","18-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50 plus years"].reverse()),t}},m=g,b=(a("6d58"),a("08a6"),a("2877")),D=Object(b["a"])(m,n,r,!1,null,"26c180b8",null);e["default"]=D.exports},"336a":function(t,e,a){"use strict";var n=a("df61"),r=a.n(n);r.a},"450d":function(t,e,a){},"4dfe":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ctrs"},[a("div",{staticClass:"ctr-table"},[a("div",{staticClass:"ctr-row"},[a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"Start Date",readonly:!0}},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("date-pick",{staticClass:"date-inputs",attrs:{format:t.format,parseDate:t.parseDate,formatDate:t.formatDate,inputAttributes:{placeholder:"End Date",readonly:!0}},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),a("div",{staticClass:"ctr-cell"},[a("button",{staticClass:"btn btn-success",on:{click:t.submitDates}},[t._v("Submit")])])])])])},r=[],s=a("f0ca"),i=a.n(s),o=a("c1df"),l=a.n(o),c=(a("6f3c"),a("1789")),d={components:{DatePick:i.a},props:["onSubmit"],data:function(){return{startDate:null,endDate:null,format:"DD/MMM/YYYY",date:c["a"].format(new Date,"DD/MMM/YYYY")}},methods:{initDates:function(){},submitDates:function(){this.startDate=l()(this.startDate).format("YYYY-MM-DD"),this.endDate=l()(this.endDate).format("YYYY-MM-DD"),this.onSubmit([this.startDate,this.endDate])},parseDate:function(t,e){return c["a"].parse(t,e)},formatDate:function(t,e){return c["a"].format(t,e)}},mounted:function(){var t=this;setTimeout((function(){return t.initDates()}),300)}},u=d,h=(a("336a"),a("2877")),f=Object(h["a"])(u,n,r,!1,null,"15deca72",null);e["a"]=f.exports},"6d58":function(t,e,a){"use strict";var n=a("450d"),r=a.n(n);r.a},df61:function(t,e,a){},fc32:function(t,e,a){}}]);
//# sourceMappingURL=chunk-79a07384.4acd3c74.js.map